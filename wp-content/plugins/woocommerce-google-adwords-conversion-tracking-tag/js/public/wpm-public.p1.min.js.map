{"version":3,"file":"wpm-public.p1.min.js","mappings":"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","sources":["webpack://WooCommerce-Pixel-Manager/./src/js/public/facebook/event_listeners.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/facebook/functions.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/facebook/loader.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/google/ads/event_listeners.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/google/ads/functions.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/google/ads/loader.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/google/analytics/ga3/event_listeners.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/google/analytics/ga3/functions.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/google/analytics/ga3/loader.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/google/analytics/ga4/event_listeners.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/google/analytics/ga4/functions.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/google/analytics/ga4/loader.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/google/analytics/loader.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/google/base/event_listeners.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/google/base/functions.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/google/base/loader.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/google/loader.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/google/optimize/event_listeners.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/google/optimize/functions.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/google/optimize/loader.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/hotjar/event_listeners.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/hotjar/functions.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/hotjar/loader.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/wpm/cookie_consent.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/wpm/event_listeners.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/wpm/functions.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/wpm/functions_loader.js","webpack://WooCommerce-Pixel-Manager/./src/js/public/wpm/init.js","webpack://WooCommerce-Pixel-Manager/webpack/bootstrap","webpack://WooCommerce-Pixel-Manager/./src/js/public/main.js"],"sourcesContent":["/**\n * All event listeners\n *\n * https://developers.facebook.com/docs/meta-pixel/reference\n * */\n\n// Load pixel event\njQuery(document).on(\"wpmLoadPixels\", function () {\n\n\tif (wpmDataLayer?.pixels?.facebook?.pixel_id && !wpmDataLayer?.pixels?.facebook?.loaded) {\n\t\tif (wpm.canIFire(\"ads\", \"facebook-ads\")) wpm.loadFacebookPixel()\n\t}\n})\n\n// AddToCart event\n// https://developers.facebook.com/docs/meta-pixel/reference\njQuery(document).on(\"wpmAddToCart\", function (event, product) {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return\n\n\t\tlet eventId = wpm.getRandomEventId()\n\n\t\tfbq(\"track\", \"AddToCart\", {\n\t\t\tcontent_type: \"product\",\n\t\t\tcontent_name: product.name,\n\t\t\tcontent_ids : product.dyn_r_ids[wpmDataLayer.pixels.facebook.dynamic_remarketing.id_type],\n\t\t\tvalue       : parseFloat(product.quantity * product.price),\n\t\t\tcurrency    : product.currency,\n\t\t}, {\n\t\t\teventID: eventId,\n\t\t})\n\n\t\tproduct[\"currency\"] = wpmDataLayer.shop.currency\n\n\t\tjQuery(document).trigger(\"wpmFbCapiEvent\", {\n\t\t\tevent_name      : \"AddToCart\",\n\t\t\tevent_id        : eventId,\n\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\tproduct_data    : product,\n\t\t\tproduct_id      : product.dyn_r_ids[wpmDataLayer.pixels.facebook.dynamic_remarketing.id_type],\n\t\t\tevent_source_url: window.location.href,\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// InitiateCheckout event\n// https://developers.facebook.com/docs/meta-pixel/reference\njQuery(document).on(\"wpmBeginCheckout\", function (event) {\n\n\ttry {\n\n\t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return\n\n\t\tlet eventId = wpm.getRandomEventId()\n\n\t\tfbq(\"track\", \"InitiateCheckout\", {}, {\n\t\t\teventID: eventId,\n\t\t})\n\n\t\tjQuery(document).trigger(\"wpmFbCapiEvent\", {\n\t\t\tevent_name      : \"InitiateCheckout\",\n\t\t\tevent_id        : eventId,\n\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\tevent_source_url: window.location.href,\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// AddToWishlist event\n// https://developers.facebook.com/docs/meta-pixel/reference\njQuery(document).on(\"wpmAddToWishlist\", function (event, product) {\n\n\ttry {\n\n\t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return\n\n\t\tlet eventId = wpm.getRandomEventId()\n\n\t\tfbq(\"track\", \"AddToWishlist\", {\n\t\t\tcontent_type: \"product\",\n\t\t\tcontent_name: product.name,\n\t\t\tcontent_ids : product.dyn_r_ids[wpmDataLayer.pixels.facebook.dynamic_remarketing.id_type],\n\t\t\tvalue       : parseFloat(product.quantity * product.price),\n\t\t\tcurrency    : product.currency,\n\t\t}, {\n\t\t\teventID: eventId,\n\t\t})\n\n\t\tproduct[\"currency\"] = wpmDataLayer.shop.currency\n\n\t\tjQuery(document).trigger(\"wpmFbCapiEvent\", {\n\t\t\tevent_name      : \"AddToWishlist\",\n\t\t\tevent_id        : eventId,\n\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\tproduct_data    : product,\n\t\t\tproduct_id      : product.dyn_r_ids[wpmDataLayer.pixels.facebook.dynamic_remarketing.id_type],\n\t\t\tevent_source_url: window.location.href,\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// ViewContent event\n// https://developers.facebook.com/docs/meta-pixel/reference\njQuery(document).on(\"wpmViewItem\", function (event, product) {\n\n\ttry {\n\n\t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return\n\n\t\twpm.fbViewContent(product)\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// view search event\n// https://developers.facebook.com/docs/meta-pixel/reference\njQuery(document).on(\"wpmSearch\", function () {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return\n\n\t\tlet eventId = wpm.getRandomEventId()\n\n\t\tfbq(\"track\", \"Search\", {}, {\n\t\t\teventID: eventId,\n\t\t})\n\n\t\tjQuery(document).trigger(\"wpmFbCapiEvent\", {\n\t\t\tevent_name      : \"Search\",\n\t\t\tevent_id        : eventId,\n\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\tevent_source_url: window.location.href,\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// load always event\njQuery(document).on(\"wpmLoadAlways\", function () {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return\n\n\t\twpm.setFbUserData()\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// view order received page event\n// https://developers.facebook.com/docs/meta-pixel/reference\njQuery(document).on(\"wpmOrderReceivedPage\", function () {\n\n\ttry {\n\n\t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return\n\n\t\tfbq(\"track\", \"Purchase\",\n\t\t\t{\n\t\t\t\tcontent_type: \"product\",\n\t\t\t\tvalue       : wpmDataLayer.order.value_filtered,\n\t\t\t\tcurrency    : wpmDataLayer.order.currency,\n\t\t\t\tcontent_ids : wpm.facebookContentIds(),\n\t\t\t},\n\t\t\t{eventID: wpmDataLayer.order.id},\n\t\t)\n\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n","/**\n * Add functions for Facebook\n * */\n\n(function (wpm, $, undefined) {\n\n\tlet fBUserData\n\n\twpm.loadFacebookPixel = () => {\n\n\t\ttry {\n\t\t\twpmDataLayer.pixels.facebook.loaded = true\n\n\t\t\t// @formatter:off\n\t\t\t!function(f,b,e,v,n,t,s)\n\t\t\t{if(f.fbq)return;n=f.fbq=function(){n.callMethod?\n\t\t\t\tn.callMethod.apply(n,arguments):n.queue.push(arguments)};\n\t\t\t\tif(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\n\t\t\t\tn.queue=[];t=b.createElement(e);t.async=!0;\n\t\t\t\tt.src=v;s=b.getElementsByTagName(e)[0];\n\t\t\t\ts.parentNode.insertBefore(t,s)}(window, document,'script',\n\t\t\t\t'https://connect.facebook.net/en_US/fbevents.js');\n\t\t\t// @formatter:on\n\n\t\t\tfbq(\"init\", wpmDataLayer.pixels.facebook.pixel_id)\n\t\t\tfbq(\"track\", \"PageView\")\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\twpm.getRandomEventId = () => (Math.random() + 1).toString(36).substring(2)\n\n\twpm.getFbUserData = () => {\n\n\t\t/**\n\t\t * We need the first one for InitiateCheckout\n\t\t * where getting the user_data from the browser is too slow\n\t\t * using wpm.getCookie(), so we cache the user_data earlier.\n\t\t * And we need the second one because the ViewContent hit happens too fast\n\t\t * after adding a variation to the cart because the function to cache\n\t\t * the user_data is too slow. But we can get the user_data using wpm.getCookie()\n\t\t * because we don't move away from the page and can wait for the browser\n\t\t * to get it.\n\t\t */\n\n\t\tif (fBUserData) {\n\t\t\treturn fBUserData\n\t\t} else {\n\t\t\treturn wpm.getFbUserDataFromBrowser()\n\t\t}\n\t}\n\n\twpm.setFbUserData = () => {\n\t\tfBUserData = wpm.getFbUserDataFromBrowser()\n\t}\n\n\twpm.getFbUserDataFromBrowser = () => {\n\n\t\tlet\n\t\t\tdata = {}\n\n\t\tif (wpm.getCookie(\"_fbp\")) {\n\t\t\tdata.fbp = wpm.getCookie(\"_fbp\")\n\t\t}\n\n\t\tif (wpm.getCookie(\"_fbc\")) {\n\t\t\tdata.fbp = wpm.getCookie(\"_fbc\")\n\t\t}\n\n\t\tif(wpmDataLayer?.user?.id){\n\t\t\tdata.external_id = wpmDataLayer.user.id\n\t\t}\n\n\t\tif (navigator.userAgent) {\n\t\t\tdata.client_user_agent = navigator.userAgent\n\t\t}\n\n\t\treturn data\n\t}\n\n\twpm.fbViewContent = product => {\n\n\t\ttry {\n\t\t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return\n\n\t\t\tlet eventId = wpm.getRandomEventId()\n\n\t\t\tfbq(\"track\", \"ViewContent\", {\n\t\t\t\tcontent_type: \"product\",\n\t\t\t\tcontent_name: product.name,\n\t\t\t\t// content_category: product.category,\n\t\t\t\tcontent_ids: product.dyn_r_ids[wpmDataLayer.pixels.facebook.dynamic_remarketing.id_type],\n\t\t\t\tcurrency   : wpmDataLayer.shop.currency,\n\t\t\t\tvalue      : product.price,\n\t\t\t}, {\n\t\t\t\teventID: eventId,\n\t\t\t})\n\n\t\t\tproduct[\"currency\"] = wpmDataLayer.shop.currency\n\n\t\t\tjQuery(document).trigger(\"wpmFbCapiEvent\", {\n\t\t\t\tevent_name      : \"ViewContent\",\n\t\t\t\tevent_id        : eventId,\n\t\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\t\tproduct_data    : product,\n\t\t\t\tproduct_id      : product.dyn_r_ids[wpmDataLayer.pixels.facebook.dynamic_remarketing.id_type],\n\t\t\t\tevent_source_url: window.location.href,\n\t\t\t})\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\twpm.facebookContentIds = () => {\n\t\tlet prodIds = []\n\n\t\tfor (const [key, item] of Object.entries(wpmDataLayer.order.items)) {\n\n\t\t\tif (wpmDataLayer?.general?.variationsOutput && 0 !== item.variation_id) {\n\t\t\t\tprodIds.push(String(wpmDataLayer.products[item.variation_id].dyn_r_ids[wpmDataLayer.pixels.facebook.dynamic_remarketing.id_type]))\n\t\t\t} else {\n\t\t\t\tprodIds.push(String(wpmDataLayer.products[item.id].dyn_r_ids[wpmDataLayer.pixels.facebook.dynamic_remarketing.id_type]))\n\t\t\t}\n\t\t}\n\n\t\treturn prodIds\n\t}\n\n\twpm.trackCustomFacebookEvent = (eventName) => {\n\t\ttry {\n\t\t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return\n\n\t\t\tlet eventId = wpm.getRandomEventId()\n\n\t\t\tfbq(\"trackCustom\", eventName, {}, {\n\t\t\t\teventID: eventId,\n\t\t\t})\n\n\t\t\tjQuery(document).trigger(\"wpmFbCapiEvent\", {\n\t\t\t\tevent_name      : eventName,\n\t\t\t\tevent_id        : eventId,\n\t\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\t\tevent_source_url: window.location.href,\n\t\t\t})\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery));\n","/**\n * Facebook loader\n */\n\nrequire(\"./functions\")\nrequire(\"./event_listeners\")\n\n// #if process.env.TIER === 'premium'\n// require(\"./functions_premium\")\n// require(\"./event_listeners_premium\")\n// #endif\n\n","/**\n * Load Google Ads event listeners\n * */\n\n// view_item_list event\njQuery(document).on(\"wpmViewItemList\", function (event, product) {\n\n\ttry {\n\t\tif(jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversionIds)) return\n\t\tif (!wpmDataLayer?.pixels?.google?.ads?.dynamic_remarketing?.status) return\n\t\tif (!wpm.googleConfigConditionsMet(\"ads\")) return\n\n\n\t\tif (\n\t\t\twpmDataLayer?.general?.variationsOutput &&\n\t\t\tproduct.isVariable &&\n\t\t\twpmDataLayer.pixels.google.ads.dynamic_remarketing.send_events_with_parent_ids === false\n\t\t) return\n\n\t\t// try to prevent that WC sends cached hits to Google\n\t\tif (!product) return\n\n\t\twpm.gtagLoaded().then(function () {\n\t\t\tgtag(\"event\", \"view_item_list\", {\n\t\t\t\tsend_to: wpm.getGoogleAdsConversionIdentifiers(),\n\t\t\t\titems  : [{\n\t\t\t\t\tid                      : product.dyn_r_ids[wpmDataLayer.pixels.google.ads.dynamic_remarketing.id_type],\n\t\t\t\t\tgoogle_business_vertical: wpmDataLayer.pixels.google.ads.google_business_vertical,\n\t\t\t\t}],\n\t\t\t})\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// add_to_cart event\njQuery(document).on(\"wpmAddToCart\", function (event, product) {\n\n\ttry {\n\t\tif(jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversionIds)) return\n\t\tif (!wpmDataLayer?.pixels?.google?.ads?.dynamic_remarketing?.status) return\n\t\tif (!wpm.googleConfigConditionsMet(\"ads\")) return\n\n\t\twpm.gtagLoaded().then(function () {\n\t\t\tgtag(\"event\", \"add_to_cart\", {\n\t\t\t\tsend_to: wpm.getGoogleAdsConversionIdentifiers(),\n\t\t\t\tvalue  : product.quantity * product.price,\n\t\t\t\titems  : [{\n\t\t\t\t\tid                      : product.dyn_r_ids[wpmDataLayer.pixels.google.ads.dynamic_remarketing.id_type],\n\t\t\t\t\tquantity                : product.quantity,\n\t\t\t\t\tprice                   : product.price,\n\t\t\t\t\tgoogle_business_vertical: wpmDataLayer.pixels.google.ads.google_business_vertical,\n\t\t\t\t}],\n\t\t\t})\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// view_item event\njQuery(document).on(\"wpmViewItem\", function (event, product) {\n\n\ttry {\n\t\tif(jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversionIds)) return\n\t\tif (!wpmDataLayer?.pixels?.google?.ads?.dynamic_remarketing?.status) return\n\t\tif (!wpm.googleConfigConditionsMet(\"ads\")) return\n\n\n\t\twpm.gtagLoaded().then(function () {\n\t\t\tgtag(\"event\", \"view_item\", {\n\t\t\t\tsend_to: wpm.getGoogleAdsConversionIdentifiers(),\n\t\t\t\tvalue  : (product.quantity ? product.quantity : 1) * product.price,\n\t\t\t\titems  : [{\n\t\t\t\t\tid                      : product.dyn_r_ids[wpmDataLayer.pixels.google.ads.dynamic_remarketing.id_type],\n\t\t\t\t\tquantity                : (product.quantity ? product.quantity : 1),\n\t\t\t\t\tprice                   : product.price,\n\t\t\t\t\tgoogle_business_vertical: wpmDataLayer.pixels.google.ads.google_business_vertical,\n\t\t\t\t}],\n\t\t\t})\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n\n// view search event\njQuery(document).on(\"wpmSearch\", function () {\n\n\ttry {\n\t\tif(jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversionIds)) return\n\t\tif (!wpmDataLayer?.pixels?.google?.ads?.dynamic_remarketing?.status) return\n\t\tif (!wpm.googleConfigConditionsMet(\"ads\")) return\n\n\n\t\tlet products = []\n\n\t\tfor (const [key, product] of Object.entries(wpmDataLayer.products)) {\n\n\t\t\tif (\n\t\t\t\twpmDataLayer?.general?.variationsOutput &&\n\t\t\t\tproduct.isVariable &&\n\t\t\t\twpmDataLayer.pixels.google.ads.dynamic_remarketing.send_events_with_parent_ids === false\n\t\t\t) return\n\n\t\t\tproducts.push({\n\t\t\t\tid                      : product.dyn_r_ids[wpmDataLayer.pixels.google.ads.dynamic_remarketing.id_type],\n\t\t\t\tgoogle_business_vertical: wpmDataLayer.pixels.google.ads.google_business_vertical,\n\t\t\t})\n\t\t}\n\n\t\t// console.log(products);\n\n\t\twpm.gtagLoaded().then(function () {\n\t\t\tgtag(\"event\", \"view_search_results\", {\n\t\t\t\tsend_to: wpm.getGoogleAdsConversionIdentifiers(),\n\t\t\t\t// value  : 1 * product.price,\n\t\t\t\titems: products,\n\t\t\t})\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n\n// view order received page event\n// TODO distinguish with or without cart data active\njQuery(document).on(\"wpmOrderReceivedPage\", function () {\n\n\ttry {\n\t\tif(jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversionIds)) return\n\t\tif (!wpmDataLayer?.pixels?.google?.ads?.dynamic_remarketing?.status) return\n\t\tif (!wpm.googleConfigConditionsMet(\"ads\")) return\n\n\t\twpm.gtagLoaded().then(function () {\n\t\t\tgtag(\"event\", \"purchase\", {\n\t\t\t\tsend_to: wpm.getGoogleAdsConversionIdentifiers(),\n\t\t\t\tvalue  : wpmDataLayer.order.value_filtered,\n\t\t\t\titems  : wpm.getGoogleAdsDynamicRemarketingOrderItems(),\n\t\t\t})\n\t\t})\n\n\t\t// console.log(wpm.getGoogleAdsDynamicRemarketingOrderItems())\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// user log in event\njQuery(document).on(\"wpmLogin\", function () {\n\n\ttry {\n\t\tif(jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversionIds)) return\n\t\tif (!wpmDataLayer?.pixels?.google?.ads?.dynamic_remarketing?.status) return\n\t\tif (!wpm.googleConfigConditionsMet(\"ads\")) return\n\n\n\t\twpm.gtagLoaded().then(function () {\n\t\t\tgtag(\"event\", \"login\", {\n\t\t\t\tsend_to: wpm.getGoogleAdsConversionIdentifiers(),\n\t\t\t})\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// view order received page event\n// new_customer parameter: https://support.google.com/google-ads/answer/9917012\njQuery(document).on(\"wpmOrderReceivedPage\", function () {\n\n\ttry {\n\t\tif(jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversionIds)) return\n\t\tif (!wpm.googleConfigConditionsMet(\"ads\")) return\n\n\t\tlet data_basic     = {}\n\t\tlet data_with_cart = {}\n\n\t\tdata_basic = {\n\t\t\tsend_to       : wpm.getGoogleAdsConversionIdentifiersWithLabel(),\n\t\t\ttransaction_id: wpmDataLayer.order.number,\n\t\t\tvalue         : wpmDataLayer.order.value_filtered,\n\t\t\tcurrency      : wpmDataLayer.order.currency,\n\t\t\tnew_customer  : wpmDataLayer.order.new_customer,\n\t\t}\n\n\t\tif (wpmDataLayer?.order?.aw_merchant_id) {\n\t\t\tdata_with_cart = {\n\t\t\t\tdiscount        : wpmDataLayer.order.discount,\n\t\t\t\taw_merchant_id  : wpmDataLayer.order.aw_merchant_id,\n\t\t\t\taw_feed_country : wpmDataLayer.order.aw_feed_country,\n\t\t\t\taw_feed_language: wpmDataLayer.order.aw_feed_language,\n\t\t\t\titems           : wpm.getGoogleAdsRegularOrderItems(),\n\t\t\t}\n\t\t}\n\n\t\twpm.gtagLoaded().then(function () {\n\t\t\tgtag(\"event\", \"conversion\", {...data_basic, ...data_with_cart})\n\t\t})\n\n\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n\n\n\n\n","/**\n * Load Google Ads functions\n * */\n\n(function (wpm, $, undefined) {\n\n\tlet conversionIdentifiers = []\n\n\twpm.getGoogleAdsConversionIdentifiersWithLabel = function () {\n\n\t\tfor (const [key, item] of Object.entries(wpmDataLayer.pixels.google.ads.conversionIds)) {\n\t\t\tconversionIdentifiers.push(key + \"/\" + item)\n\t\t}\n\t\treturn conversionIdentifiers\n\t}\n\n\twpm.getGoogleAdsConversionIdentifiers = function () {\n\n\t\tlet conversionIdentifiers = []\n\t\tfor (const [key, item] of Object.entries(wpmDataLayer.pixels.google.ads.conversionIds)) {\n\t\t\tconversionIdentifiers.push(key)\n\t\t}\n\n\t\treturn conversionIdentifiers\n\t}\n\n\twpm.getGoogleAdsRegularOrderItems = function () {\n\n\t\tlet orderItems = []\n\n\t\tfor (const [key, item] of Object.entries(wpmDataLayer.order.items)) {\n\n\t\t\tlet orderItem\n\n\t\t\torderItem = {\n\t\t\t\tquantity: item.quantity,\n\t\t\t\tprice   : item.price,\n\t\t\t}\n\n\t\t\tif (wpmDataLayer?.general?.variationsOutput && 0 !== item.variation_id) {\n\n\t\t\t\torderItem.id = String(wpmDataLayer.products[item.variation_id].dyn_r_ids[wpmDataLayer.pixels.google.ads.dynamic_remarketing.id_type])\n\t\t\t\torderItems.push(orderItem)\n\t\t\t} else {\n\n\t\t\t\torderItem.id = String(wpmDataLayer.products[item.id].dyn_r_ids[wpmDataLayer.pixels.google.ads.dynamic_remarketing.id_type])\n\t\t\t\torderItems.push(orderItem)\n\t\t\t}\n\t\t}\n\n\t\treturn orderItems\n\t}\n\n\twpm.getGoogleAdsDynamicRemarketingOrderItems = function () {\n\n\t\tlet orderItems = []\n\n\t\tfor (const [key, item] of Object.entries(wpmDataLayer.order.items)) {\n\n\t\t\tlet orderItem\n\n\t\t\torderItem = {\n\t\t\t\tquantity                : item.quantity,\n\t\t\t\tprice                   : item.price,\n\t\t\t\tgoogle_business_vertical: wpmDataLayer.pixels.google.ads.google_business_vertical,\n\t\t\t}\n\n\t\t\tif (wpmDataLayer?.general?.variationsOutput && 0 !== item.variation_id) {\n\n\t\t\t\torderItem.id = String(wpmDataLayer.products[item.variation_id].dyn_r_ids[wpmDataLayer.pixels.google.ads.dynamic_remarketing.id_type])\n\t\t\t\torderItems.push(orderItem)\n\t\t\t} else {\n\n\t\t\t\torderItem.id = String(wpmDataLayer.products[item.id].dyn_r_ids[wpmDataLayer.pixels.google.ads.dynamic_remarketing.id_type])\n\t\t\t\torderItems.push(orderItem)\n\t\t\t}\n\t\t}\n\n\t\treturn orderItems\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery))\n","/**\n * Load Google Ads\n */\n\n\nrequire(\"./functions\")\nrequire(\"./event_listeners\")\n","/**\n * Load Google Universal Analytics (GA3) event listeners\n * */\n\n\n// view order received page event\njQuery(document).on(\"wpmOrderReceivedPage\", function () {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.universal?.property_id) return\n\t\tif (wpmDataLayer?.pixels?.google?.analytics?.universal?.mp_active) return\n\t\tif (!wpm.googleConfigConditionsMet(\"analytics\")) return\n\n\t\twpm.gtagLoaded().then(function () {\n\t\t\tgtag(\"event\", \"purchase\", {\n\t\t\t\tsend_to       : [wpmDataLayer.pixels.google.analytics.universal.property_id],\n\t\t\t\ttransaction_id: wpmDataLayer.order.number,\n\t\t\t\taffiliation   : wpmDataLayer.order.affiliation,\n\t\t\t\tcurrency      : wpmDataLayer.order.currency,\n\t\t\t\tvalue         : wpmDataLayer.order.value_regular,\n\t\t\t\tdiscount      : wpmDataLayer.order.discount,\n\t\t\t\ttax           : wpmDataLayer.order.tax,\n\t\t\t\tshipping      : wpmDataLayer.order.shipping,\n\t\t\t\tcoupon        : wpmDataLayer.order.coupon,\n\t\t\t\titems         : wpm.getGAUAOrderItems(),\n\t\t\t})\n\t\t})\n\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n","/**\n * Add functions for Google Analytics Universal\n * */\n\n(function (wpm, $, undefined) {\n\n\twpm.getGAUAOrderItems = function () {\n\n\t\t// \"id\"           : \"34\",\n\t\t// \"name\"         : \"Hoodie\",\n\t\t// \"brand\"        : \"\",\n\t\t// \"category\"     : \"Hoodies\",\n\t\t// \"list_position\": 1,\n\t\t// \"price\"        : 45,\n\t\t// \"quantity\"     : 1,\n\t\t// \"variant\"      : \"Color: blue | Logo: yes\"\n\n\n\t\tlet orderItems = []\n\n\t\tfor (const [key, item] of Object.entries(wpmDataLayer.order.items)) {\n\n\t\t\tlet orderItem\n\n\t\t\torderItem = {\n\t\t\t\tquantity: item.quantity,\n\t\t\t\tprice   : item.price,\n\t\t\t\tname    : item.name,\n\t\t\t\tcurrency: wpmDataLayer.order.currency,\n\t\t\t\tcategory: wpmDataLayer.products[item.id].category.join(\"/\"),\n\t\t\t}\n\n\t\t\tif (wpmDataLayer?.general?.variationsOutput && 0 !== item.variation_id) {\n\n\t\t\t\torderItem.id      = String(wpmDataLayer.products[item.variation_id].dyn_r_ids[wpmDataLayer.pixels.google.analytics.id_type])\n\t\t\t\torderItem.variant = wpmDataLayer.products[item.variation_id].variant_name\n\t\t\t\torderItem.brand   = wpmDataLayer.products[item.variation_id].brand\n\t\t\t} else {\n\n\t\t\t\torderItem.id    = String(wpmDataLayer.products[item.id].dyn_r_ids[wpmDataLayer.pixels.google.analytics.id_type])\n\t\t\t\torderItem.brand = wpmDataLayer.products[item.id].brand\n\t\t\t}\n\n\t\t\torderItem = wpm.ga3AddListNameToProduct(orderItem)\n\n\t\t\torderItems.push(orderItem)\n\t\t}\n\n\t\treturn orderItems\n\t}\n\n\twpm.ga3AddListNameToProduct = function (item_data, productPosition = null) {\n\n\t\t// if (wpm.ga3CanProductListBeSet(item_data.id)) {\n\t\t// \titem_data.listname = wpmDataLayer.shop.list_name\n\t\t//\n\t\t// \tif (productPosition) {\n\t\t// \t\titem_data.list_position = productPosition\n\t\t// \t}\n\t\t// }\n\n\t\titem_data.list_name = wpmDataLayer.shop.list_name\n\n\t\tif (productPosition) {\n\t\t\titem_data.list_position = productPosition\n\t\t}\n\n\t\treturn item_data\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery))\n","/**\n * Google Universal Analytics (GA3) loader\n */\n\nrequire(\"./functions\")\nrequire(\"./event_listeners\")\n\n// #if process.env.TIER === 'premium'\n// require(\"./functions_premium\")\n// require(\"./event_listeners_premium\")\n// #endif\n","/**\n * Load GA4 event listeners\n * */\n\n\n// view order received page event\njQuery(document).on(\"wpmOrderReceivedPage\", function () {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return\n\t\tif (wpmDataLayer?.pixels?.google?.analytics?.ga4?.mp_active) return\n\t\tif (!wpm.googleConfigConditionsMet(\"analytics\")) return\n\n\t\twpm.gtagLoaded().then(function () {\n\t\t\tgtag(\"event\", \"purchase\", {\n\t\t\t\tsend_to       : [wpmDataLayer.pixels.google.analytics.ga4.measurement_id],\n\t\t\t\ttransaction_id: wpmDataLayer.order.number,\n\t\t\t\taffiliation   : wpmDataLayer.order.affiliation,\n\t\t\t\tcurrency      : wpmDataLayer.order.currency,\n\t\t\t\tvalue         : wpmDataLayer.order.value_regular,\n\t\t\t\tdiscount      : wpmDataLayer.order.discount,\n\t\t\t\ttax           : wpmDataLayer.order.tax,\n\t\t\t\tshipping      : wpmDataLayer.order.shipping,\n\t\t\t\tcoupon        : wpmDataLayer.order.coupon,\n\t\t\t\titems         : wpm.getGA4OrderItems(),\n\t\t\t})\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n","/**\n * Load GA4 functions\n * */\n\n(function (wpm, $, undefined) {\n\n\twpm.getGA4OrderItems = function () {\n\n\t\t// \"item_id\"      : \"34\",\n\t\t// \"item_name\"    : \"Hoodie\",\n\t\t// \"quantity\"     : 1,\n\t\t// \"item_brand\"   : \"\",\n\t\t// \"item_variant\" : \"Color: blue | Logo: yes\",\n\t\t// \"price\"        : 45,\n\t\t// \"currency\"     : \"CHF\",\n\t\t// \"item_category\": \"Hoodies\"\n\n\n\t\tlet orderItems = []\n\n\t\tfor (const [key, item] of Object.entries(wpmDataLayer.order.items)) {\n\n\t\t\tlet orderItem\n\n\t\t\torderItem = {\n\t\t\t\tquantity     : item.quantity,\n\t\t\t\tprice        : item.price,\n\t\t\t\titem_name    : item.name,\n\t\t\t\tcurrency     : wpmDataLayer.order.currency,\n\t\t\t\titem_category: wpmDataLayer.products[item.id].category.join(\"/\"),\n\t\t\t}\n\n\t\t\tif (wpmDataLayer?.general?.variationsOutput && 0 !== item.variation_id) {\n\n\t\t\t\torderItem.item_id      = String(wpmDataLayer.products[item.variation_id].dyn_r_ids[wpmDataLayer.pixels.google.analytics.id_type])\n\t\t\t\torderItem.item_variant = wpmDataLayer.products[item.variation_id].variant_name\n\t\t\t\torderItem.item_brand   = wpmDataLayer.products[item.variation_id].brand\n\t\t\t} else {\n\n\t\t\t\torderItem.item_id    = String(wpmDataLayer.products[item.id].dyn_r_ids[wpmDataLayer.pixels.google.analytics.id_type])\n\t\t\t\torderItem.item_brand = wpmDataLayer.products[item.id].brand\n\t\t\t}\n\n\t\t\torderItems.push(orderItem)\n\t\t}\n\n\t\treturn orderItems\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery))\n","/**\n * GA4 loader\n */\n\nrequire(\"./functions\")\nrequire(\"./event_listeners\")\n\n// #if process.env.TIER === 'premium'\n// require(\"./functions_premium\")\n// require(\"./event_listeners_premium\")\n// #endif\n","/**\n * Google Analytics loader\n */\n\nrequire(\"./ga3/loader\")\nrequire(\"./ga4/loader\")\n","/**\n * Load Google base event listeners\n */\n\n// Pixel load event listener\njQuery(document).on(\"wpmLoadPixels\", function () {\n\n\tif (typeof wpmDataLayer?.pixels?.google?.state === \"undefined\") {\n\t\tif (wpm.canGoogleLoad()) {\n\t\t\twpm.loadGoogle()\n\t\t} else {\n\t\t\twpm.logPreventedPixelLoading(\"google\", \"analytics / ads\")\n\t\t}\n\t}\n})\n","/**\n * Load Google base functions\n */\n\n(function (wpm, $, undefined) {\n\n\twpm.googleConfigConditionsMet = function (type) {\n\n\t\t// always returns true if Google Consent Mode is active\n\t\tif (wpmDataLayer?.pixels?.google?.consent_mode?.active) {\n\t\t\treturn true\n\t\t} else if (wpm.getConsentValues().mode === \"category\") {\n\t\t\treturn wpm.getConsentValues().categories[type] === true\n\t\t} else if (wpm.getConsentValues().mode === \"pixel\") {\n\t\t\treturn wpm.getConsentValues().pixels.includes(\"google-\" + type)\n\t\t} else {\n\t\t\treturn false\n\t\t}\n\t}\n\n\twpm.getVisitorConsentStatusAndUpdateGoogleConsentSettings = function (google_consent_settings) {\n\n\t\tif (wpm.getConsentValues().mode === \"category\") {\n\n\t\t\tif (wpm.getConsentValues().categories.analytics) google_consent_settings.analytics_storage = \"granted\"\n\t\t\tif (wpm.getConsentValues().categories.ads) google_consent_settings.ad_storage = \"granted\"\n\t\t} else if ((wpm.getConsentValues().mode === \"pixel\")) {\n\n\t\t\tgoogle_consent_settings.analytics_storage = wpm.getConsentValues().pixels.includes(\"google-analytics\") ? \"granted\" : \"denied\"\n\t\t\tgoogle_consent_settings.ad_storage        = wpm.getConsentValues().pixels.includes(\"google-ads\") ? \"granted\" : \"denied\"\n\t\t}\n\n\t\treturn google_consent_settings\n\t}\n\n\twpm.updateGoogleConsentMode = function (analytics = true, ads = true) {\n\n\t\ttry {\n\t\t\tif (\n\t\t\t\t!window.gtag ||\n\t\t\t\t!wpmDataLayer.shop.cookie_consent_mgmt.explicit_consent\n\t\t\t) return\n\n\t\t\tgtag(\"consent\", \"update\", {\n\t\t\t\tanalytics_storage: analytics ? \"granted\" : \"denied\",\n\t\t\t\tad_storage       : ads ? \"granted\" : \"denied\",\n\t\t\t})\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\twpm.fireGtagGoogleAds = function () {\n\t\ttry {\n\t\t\twpmDataLayer.pixels.google.ads.state = \"loading\"\n\n\t\t\tif (wpmDataLayer?.pixels?.google?.ads?.enhanced_conversions?.active) {\n\t\t\t\tfor (const [key, item] of Object.entries(wpmDataLayer.pixels.google.ads.conversionIds)) {\n\t\t\t\t\tgtag(\"config\", key, {\"allow_enhanced_conversions\": true})\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (const [key, item] of Object.entries(wpmDataLayer.pixels.google.ads.conversionIds)) {\n\t\t\t\t\tgtag(\"config\", key)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (wpmDataLayer?.pixels?.google?.ads?.conversionIds && wpmDataLayer?.pixels?.google?.ads?.phone_conversion_label && wpmDataLayer?.pixels?.google?.ads?.phone_conversion_number) {\n\t\t\t\tgtag(\"config\", Object.keys(wpmDataLayer.pixels.google.ads.conversionIds)[0] + \"/\" + wpmDataLayer.pixels.google.ads.phone_conversion_label, {\n\t\t\t\t\tphone_conversion_number: wpmDataLayer.pixels.google.ads.phone_conversion_number,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\t// ! enhanced_conversion_data needs to set on the window object\n\t\t\t// https://support.google.com/google-ads/answer/9888145#zippy=%2Cvalidate-your-implementation-using-chrome-developer-tools\n\t\t\tif (\"order_received_page\" === wpmDataLayer.shop.page_type && wpmDataLayer?.order?.google?.ads?.enhanced_conversion_data) {\n\t\t\t\twindow.enhanced_conversion_data = wpmDataLayer.order.google.ads.enhanced_conversion_data\n\t\t\t}\n\n\t\t\twpmDataLayer.pixels.google.ads.state = \"ready\"\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\twpm.fireGtagGoogleAnalyticsUA = function () {\n\n\t\ttry {\n\t\t\twpmDataLayer.pixels.google.analytics.universal.state = \"loading\"\n\n\t\t\tgtag(\"config\", wpmDataLayer.pixels.google.analytics.universal.property_id, wpmDataLayer.pixels.google.analytics.universal.parameters)\n\t\t\twpmDataLayer.pixels.google.analytics.universal.state = \"ready\"\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\twpm.fireGtagGoogleAnalyticsGA4 = function () {\n\n\t\ttry {\n\t\t\twpmDataLayer.pixels.google.analytics.ga4.state = \"loading\"\n\n\t\t\tgtag(\"config\", wpmDataLayer.pixels.google.analytics.ga4.measurement_id, wpmDataLayer.pixels.google.analytics.ga4.parameters)\n\t\t\twpmDataLayer.pixels.google.analytics.ga4.state = \"ready\"\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\twpm.isGoogleActive = function () {\n\n\t\tif (\n\t\t\twpmDataLayer?.pixels?.google?.analytics?.universal?.property_id ||\n\t\t\twpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id ||\n\t\t\t!jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversionIds)\n\t\t) {\n\t\t\treturn true\n\t\t} else {\n\t\t\treturn false\n\t\t}\n\t}\n\n\twpm.getGoogleGtagId = function () {\n\n\t\tif (wpmDataLayer?.pixels?.google?.analytics?.universal?.property_id) {\n\t\t\treturn wpmDataLayer.pixels.google.analytics.universal.property_id\n\t\t} else if (wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) {\n\t\t\treturn wpmDataLayer.pixels.google.analytics.ga4.measurement_id\n\t\t} else {\n\t\t\treturn Object.keys(wpmDataLayer.pixels.google.ads.conversionIds)[0]\n\t\t}\n\t}\n\n\twpm.loadGoogle = function () {\n\n\t\tif (wpm.isGoogleActive()) {\n\n\t\t\twpmDataLayer.pixels.google.state = \"loading\"\n\n\t\t\twpm.loadScriptAndCacheIt(\"https://www.googletagmanager.com/gtag/js?id=\" + wpm.getGoogleGtagId())\n\t\t\t\t.done(function (script, textStatus) {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\t// Initiate Google dataLayer and gtag\n\t\t\t\t\t\twindow.dataLayer = window.dataLayer || []\n\t\t\t\t\t\twindow.gtag      = function gtag() {\n\t\t\t\t\t\t\tdataLayer.push(arguments)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Google Consent Mode\n\t\t\t\t\t\tif (wpmDataLayer?.pixels?.google?.consent_mode?.active) {\n\n\t\t\t\t\t\t\tlet google_consent_settings = {\n\t\t\t\t\t\t\t\t\"ad_storage\"       : wpmDataLayer.pixels.google.consent_mode.ad_storage,\n\t\t\t\t\t\t\t\t\"analytics_storage\": wpmDataLayer.pixels.google.consent_mode.analytics_storage,\n\t\t\t\t\t\t\t\t\"wait_for_update\"  : wpmDataLayer.pixels.google.consent_mode.wait_for_update,\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (wpmDataLayer?.pixels?.google?.consent_mode?.region) {\n\t\t\t\t\t\t\t\tgoogle_consent_settings.region = wpmDataLayer.pixels.google.consent_mode.region\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tgoogle_consent_settings = wpm.getVisitorConsentStatusAndUpdateGoogleConsentSettings(google_consent_settings)\n\n\t\t\t\t\t\t\tgtag(\"consent\", \"default\", google_consent_settings)\n\t\t\t\t\t\t\tgtag(\"set\", \"ads_data_redaction\", wpmDataLayer.pixels.google.consent_mode.ads_data_redaction)\n\t\t\t\t\t\t\tgtag(\"set\", \"url_passthrough\", wpmDataLayer.pixels.google.consent_mode.url_passthrough)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Google Linker\n\t\t\t\t\t\t// https://developers.google.com/gtagjs/devguide/linker\n\t\t\t\t\t\tif (wpmDataLayer?.pixels?.google?.linker?.settings) {\n\t\t\t\t\t\t\tgtag(\"set\", \"linker\", wpmDataLayer.pixels.google.linker.settings)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgtag(\"js\", new Date())\n\n\t\t\t\t\t\t// Google Ads loader\n\t\t\t\t\t\tif (!jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversionIds)) {  // Only run if the pixel has set up\n\n\t\t\t\t\t\t\tif (wpm.googleConfigConditionsMet(\"ads\")) {  \t\t\t\t\t\t\t// Only run if cookie consent has been given\n\t\t\t\t\t\t\t\twpm.fireGtagGoogleAds()\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twpm.logPreventedPixelLoading(\"google-ads\", \"ads\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t// Google Universal Analytics loader\n\t\t\t\t\t\tif (wpmDataLayer?.pixels?.google?.analytics?.universal?.property_id) {  \t\t// Only run if the pixel has set up\n\n\t\t\t\t\t\t\tif (wpm.googleConfigConditionsMet(\"analytics\")) {\t\t\t\t\t\t// Only run if cookie consent has been given\n\t\t\t\t\t\t\t\twpm.fireGtagGoogleAnalyticsUA()\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twpm.logPreventedPixelLoading(\"google-universal-analytics\", \"analytics\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// GA4 loader\n\t\t\t\t\t\tif (wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) {  \t\t\t// Only run if the pixel has set up\n\n\t\t\t\t\t\t\tif (wpm.googleConfigConditionsMet(\"analytics\")) {\t\t\t\t\t\t// Only run if cookie consent has been given\n\t\t\t\t\t\t\t\twpm.fireGtagGoogleAnalyticsGA4()\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twpm.logPreventedPixelLoading(\"ga4\", \"analytics\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\twpmDataLayer.pixels.google.state = \"ready\"\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error(e)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t}\n\t}\n\n\twpm.canGoogleLoad = function () {\n\n\t\tif (wpmDataLayer?.pixels?.google?.consent_mode?.active) {\n\t\t\treturn true\n\t\t} else if (\"category\" === wpm.getConsentValues().mode) {\n\t\t\treturn !!(wpm.getConsentValues().categories[\"ads\"] || wpm.getConsentValues().categories[\"analytics\"])\n\t\t} else if (\"pixel\" === wpm.getConsentValues().mode) {\n\t\t\treturn wpm.getConsentValues().pixels.includes(\"google-ads\") || wpm.getConsentValues().pixels.includes(\"google-analytics\")\n\t\t} else {\n\t\t\tconsole.error(\"Couldn't find a valid load condition for Google mode in wpmConsentValues\")\n\t\t\treturn false\n\t\t}\n\t}\n\n\twpm.gtagLoaded = function () {\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (typeof wpmDataLayer?.pixels?.google?.state === \"undefined\") reject()\n\n\t\t\tlet startTime = 0\n\t\t\tlet timeout   = 5000\n\t\t\tlet frequency = 200;\n\n\t\t\t(function wait() {\n\t\t\t\tif (wpmDataLayer?.pixels?.google?.state === \"ready\") return resolve()\n\t\t\t\tif (startTime >= timeout) return reject()\n\t\t\t\tstartTime += frequency\n\t\t\t\tsetTimeout(wait, frequency)\n\t\t\t})()\n\t\t})\n\t}\n\n\n}(window.wpm = window.wpm || {}, jQuery));\n","/**\n * Load Google base\n */\n\n// Load base\nrequire(\"./functions\")\nrequire(\"./event_listeners\")\n\n// #if process.env.TIER === 'premium'\n// require(\"./functions_premium\")\n// require(\"./event_listeners_premium\")\n// #endif\n","/**\n * Load Google\n */\n\n// Load base\nrequire(\"./base/loader\")\n\n//Load additional Google libraries\nrequire(\"./ads/loader\")\nrequire(\"./analytics/loader\")\nrequire(\"./optimize/loader\")\n\n\n","/**\n * Load Google Optimize event listeners\n */\n\njQuery(document).on(\"wpmLoadPixels\", function () {\n\n\tif (wpmDataLayer?.pixels?.google?.optimize?.container_id && !wpmDataLayer?.pixels?.google?.optimize?.loaded) {\n\t\tif (wpm.canIFire(\"analytics\", \"google-optimize\")) wpm.load_google_optimize_pixel()\n\t}\n})\n","/**\n * Load Google Optimize functions\n */\n\n\n(function (wpm, $, undefined) {\n\n\twpm.load_google_optimize_pixel = function () {\n\n\t\ttry {\n\t\t\twpmDataLayer.pixels.google.optimize.loaded = true\n\n\t\t\twpm.loadScriptAndCacheIt(\"https://www.googleoptimize.com/optimize.js?id=\" + wpmDataLayer.pixels.google.optimize.container_id)\n\t\t\t// .done(function (script, textStatus) {\n\t\t\t// \t\tconsole.log('Google Optimize loaded')\n\t\t\t// });\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery));\n","/**\n * Load Google Optimize\n */\n\nrequire(\"./functions\")\nrequire(\"./event_listeners\")\n","/**\n * Load Hotjar event listeners\n */\n\n// Pixel load event listener\njQuery(document).on(\"wpmLoadPixels\", function () {\n\n\tif (wpmDataLayer?.pixels?.hotjar?.site_id && !wpmDataLayer?.pixels?.hotjar?.loaded) {\n\t\tif (wpm.canIFire(\"analytics\", \"hotjar\") && !wpmDataLayer?.pixels?.hotjar?.loaded) wpm.load_hotjar_pixel()\n\t}\n})\n","/**\n * Load Hotjar functions\n */\n\n(function (wpm, $, undefined) {\n\n\twpm.load_hotjar_pixel = function () {\n\n\t\ttry {\n\t\t\twpmDataLayer.pixels.hotjar.loaded = true;\n\n\t\t\t// @formatter:off\n\t\t\t(function(h,o,t,j,a,r){\n\t\t\t\th.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};\n\t\t\t\th._hjSettings={hjid:wpmDataLayer.pixels.hotjar.site_id,hjsv:6};\n\t\t\t\ta=o.getElementsByTagName('head')[0];\n\t\t\t\tr=o.createElement('script');r.async=1;\n\t\t\t\tr.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;\n\t\t\t\ta.appendChild(r);\n\t\t\t})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');\n\t\t\t// @formatter:on\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery));\n","/**\n * Hotjar loader\n */\n\nrequire(\"./functions\")\nrequire(\"./event_listeners\")\n","/**\n * Consent Mode functions\n */\n\n(function (wpm, $, undefined) {\n\n\n\t/**\n\t * Handle Cookie Management Platforms\n\t */\n\n\tlet getComplianzCookies = () => {\n\n\t\tlet cmplz_statistics     = wpm.getCookie(\"cmplz_statistics\")\n\t\tlet cmplz_marketing      = wpm.getCookie(\"cmplz_marketing\")\n\t\tlet cmplz_consent_status = wpm.getCookie(\"cmplz_consent_status\") || wpm.getCookie(\"cmplz_banner-status\")\n\n\t\tif (cmplz_consent_status) {\n\t\t\treturn {\n\t\t\t\tanalytics       : cmplz_statistics === \"allow\",\n\t\t\t\tads             : cmplz_marketing === \"allow\",\n\t\t\t\tvisitorHasChosen: true,\n\t\t\t}\n\t\t} else {\n\t\t\treturn false\n\t\t}\n\t}\n\n\tlet getCookieLawInfoCookies = () => {\n\n\t\tlet analyticsCookie  = wpm.getCookie(\"cookielawinfo-checkbox-analytics\") || wpm.getCookie(\"cookielawinfo-checkbox-analytiques\")\n\t\tlet adsCookie        = wpm.getCookie(\"cookielawinfo-checkbox-advertisement\") || wpm.getCookie(\"cookielawinfo-checkbox-performance\") || wpm.getCookie(\"cookielawinfo-checkbox-publicite\")\n\t\tlet visitorHasChosen = wpm.getCookie(\"CookieLawInfoConsent\")\n\n\t\tif (analyticsCookie || adsCookie) {\n\n\t\t\treturn {\n\t\t\t\tanalytics       : analyticsCookie === \"yes\",\n\t\t\t\tads             : adsCookie === \"yes\",\n\t\t\t\tvisitorHasChosen: !!visitorHasChosen,\n\t\t\t}\n\t\t} else {\n\t\t\treturn false\n\t\t}\n\t}\n\n\n\tlet\n\t\twpmConsentValues              = {}\n\twpmConsentValues.categories       = {}\n\twpmConsentValues.pixels           = []\n\twpmConsentValues.mode             = \"category\"\n\twpmConsentValues.visitorHasChosen = false\n\n\twpm.getConsentValues = () => wpmConsentValues\n\n\twpm.setConsentValueCategories = (analytics = false, ads = false) => {\n\t\twpmConsentValues.categories.analytics = analytics\n\t\twpmConsentValues.categories.ads       = ads\n\t}\n\n\twpm.updateConsentCookieValues = (analytics = null, ads = null, explicitConsent = false) => {\n\n\t\t// ad_storage\n\t\t// analytics_storage\n\t\t// functionality_storage\n\t\t// personalization_storage\n\t\t// security_storage\n\n\t\tlet cookie\n\n\t\tif (analytics || ads) {\n\n\t\t\tif (analytics) {\n\t\t\t\twpmConsentValues.categories.analytics = !!analytics\n\t\t\t}\n\t\t\tif (ads) {\n\t\t\t\twpmConsentValues.categories.ads = !!ads\n\t\t\t}\n\n\t\t} else if (cookie = wpm.getCookie(\"CookieConsent\")) {\n\n\t\t\t// Cookiebot\n\t\t\t// https://wordpress.org/plugins/cookiebot/\n\t\t\tcookie = decodeURI(cookie)\n\n\t\t\twpmConsentValues.categories.analytics = cookie.indexOf(\"statistics:true\") >= 0\n\t\t\twpmConsentValues.categories.ads       = cookie.indexOf(\"marketing:true\") >= 0\n\t\t\twpmConsentValues.visitorHasChosen     = true\n\n\t\t} else if (cookie = wpm.getCookie(\"CookieScriptConsent\")) {\n\n\t\t\t// Cookie Script\n\t\t\t// https://wordpress.org/plugins/cookie-script-com/\n\n\t\t\tcookie = JSON.parse(cookie)\n\n\t\t\tif (cookie.action === \"reject\") {\n\t\t\t\twpmConsentValues.categories.analytics = false\n\t\t\t\twpmConsentValues.categories.ads       = false\n\t\t\t} else if (cookie.categories.length === 2) {\n\t\t\t\twpmConsentValues.categories.analytics = true\n\t\t\t\twpmConsentValues.categories.ads       = true\n\t\t\t} else {\n\t\t\t\twpmConsentValues.categories.analytics = cookie.categories.indexOf(\"performance\") >= 0\n\t\t\t\twpmConsentValues.categories.ads       = cookie.categories.indexOf(\"targeting\") >= 0\n\t\t\t}\n\n\t\t\twpmConsentValues.visitorHasChosen = true\n\n\t\t} else if (cookie = wpm.getCookie(\"borlabs-cookie\")) {\n\n\t\t\t// Borlabs Cookie\n\t\t\t// https://borlabs.io/borlabs-cookie/\n\n\t\t\tcookie = decodeURI(cookie)\n\t\t\tcookie = JSON.parse(cookie)\n\n\t\t\twpmConsentValues.categories.analytics = !!cookie?.consents?.statistics\n\t\t\twpmConsentValues.categories.ads       = !!cookie?.consents?.marketing\n\t\t\twpmConsentValues.visitorHasChosen     = true\n\t\t\twpmConsentValues.pixels               = [...cookie?.consents?.statistics || [], ...cookie?.consents?.marketing || []]\n\t\t\twpmConsentValues.mode                 = \"pixel\"\n\n\t\t} else if (cookie = getComplianzCookies()) {\n\n\t\t\t// Complianz Cookie\n\t\t\t// https://wordpress.org/plugins/complianz-gdpr/\n\n\t\t\twpmConsentValues.categories.analytics = cookie.analytics === true\n\t\t\twpmConsentValues.categories.ads       = cookie.ads === true\n\t\t\twpmConsentValues.visitorHasChosen     = cookie.visitorHasChosen\n\n\t\t} else if (cookie = wpm.getCookie(\"cookie_notice_accepted\")) {\n\n\t\t\t// Cookie Compliance (free version)\n\t\t\t// https://wordpress.org/plugins/cookie-notice/\n\n\t\t\twpmConsentValues.categories.analytics = true\n\t\t\twpmConsentValues.categories.ads       = true\n\t\t\twpmConsentValues.visitorHasChosen     = true\n\n\t\t} else if (cookie = wpm.getCookie(\"hu-consent\")) {\n\n\t\t\t// Cookie Compliance (pro version)\n\t\t\t// https://wordpress.org/plugins/cookie-notice/\n\n\t\t\tcookie = JSON.parse(cookie)\n\n\t\t\twpmConsentValues.categories.analytics = !!cookie.categories[\"3\"]\n\t\t\twpmConsentValues.categories.ads       = !!cookie.categories[\"4\"]\n\t\t\twpmConsentValues.visitorHasChosen     = true\n\n\t\t} else if (cookie = getCookieLawInfoCookies()) {\n\n\t\t\t// CookieYes, GDPR Cookie Consent (Cookie Law Info)\n\t\t\t// https://wordpress.org/plugins/cookie-law-info/\n\n\t\t\twpmConsentValues.categories.analytics = cookie.analytics === true\n\t\t\twpmConsentValues.categories.ads       = cookie.ads === true\n\t\t\twpmConsentValues.visitorHasChosen     = cookie.visitorHasChosen === true\n\n\t\t} else if (cookie = wpm.getCookie(\"moove_gdpr_popup\")) {\n\n\t\t\t// GDPR Cookie Compliance Plugin by Moove Agency\n\t\t\t// https://wordpress.org/plugins/gdpr-cookie-compliance/\n\t\t\t// TODO write documentation on how to set up the plugin in order for this to work properly\n\n\t\t\tcookie = JSON.parse(cookie)\n\n\t\t\twpmConsentValues.categories.analytics = cookie.thirdparty === \"1\"\n\t\t\twpmConsentValues.categories.ads       = cookie.advanced === \"1\"\n\t\t\twpmConsentValues.visitorHasChosen     = true\n\n\t\t} else {\n\t\t\t// consentValues.categories.analytics = true\n\t\t\t// consentValues.categories.ads       = true\n\n\t\t\twpmConsentValues.categories.analytics = !explicitConsent\n\t\t\twpmConsentValues.categories.ads       = !explicitConsent\n\t\t}\n\t}\n\n\twpm.updateConsentCookieValues()\n\n\twpm.setConsentDefaultValuesToExplicit = () => {\n\t\twpmConsentValues.categories = {\n\t\t\tanalytics: false,\n\t\t\tads      : false,\n\t\t}\n\t}\n\n\twpm.canIFire = (category, pixelName) => {\n\n\t\tlet canIFireMode\n\n\t\tif (\"category\" === wpmConsentValues.mode) {\n\t\t\tcanIFireMode = !!wpmConsentValues.categories[category]\n\t\t} else if (\"pixel\" === wpmConsentValues.mode) {\n\t\t\tcanIFireMode = wpmConsentValues.pixels.includes(pixelName)\n\n\t\t\t// If a user sets \"bing-ads\" in Borlabs Cookie instead of\n\t\t\t// \"microsoft-ads\" in the Borlabs settings, we need to check\n\t\t\t// for that too.\n\t\t\tif (false === canIFireMode && \"microsoft-ads\" === pixelName) {\n\t\t\t\tcanIFireMode = wpmConsentValues.pixels.includes(\"bing-ads\")\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.error(\"Couldn't find a valid consent mode in wpmConsentValues\")\n\t\t\tcanIFireMode = false\n\t\t}\n\n\t\tif (canIFireMode) {\n\t\t\treturn true\n\t\t} else {\n\t\t\tif (true || wpm.urlHasParameter(\"debugConsentMode\")) {\n\t\t\t\twpm.logPreventedPixelLoading(pixelName, category)\n\t\t\t}\n\n\t\t\treturn false\n\t\t}\n\t}\n\n\twpm.logPreventedPixelLoading = (pixelName, category) => {\n\n\t\tif (wpmDataLayer?.shop?.cookie_consent_mgmt?.explicit_consent) {\n\t\t\tconsole.log(\"WooCommerce Pixel Manager: The \\\"\" + pixelName + \" (category: \" + category + \")\\\" pixel has not fired because you have not given consent for it yet. (WPM is in explicit consent mode.)\")\n\t\t} else {\n\t\t\tconsole.log(\"WooCommerce Pixel Manager: The \\\"\" + pixelName + \" (category: \" + category + \")\\\" pixel has not fired because you have removed consent for this pixel. (WPM is in implicit consent mode.)\")\n\t\t}\n\t}\n\n\t/**\n\t * Runs through each script in <head> and blocks / unblocks it according to the plugin settings\n\t * and user consent.\n\t */\n\n\t// https://stackoverflow.com/q/65453565/4688612\n\twpm.scriptTagObserver = new MutationObserver((mutations) => {\n\t\tmutations.forEach(({addedNodes}) => {\n\t\t\t[...addedNodes]\n\t\t\t\t.forEach(node => {\n\n\t\t\t\t\tif ($(node).data(\"wpm-cookie-category\")) {\n\n\t\t\t\t\t\t// If the pixel category has been approved > unblock\n\t\t\t\t\t\t// If the pixel belongs to more than one category, then unblock if one of the categories has been approved\n\t\t\t\t\t\t// If no category has been approved, but the Google Consent Mode is active, then only unblock the Google scripts\n\n\t\t\t\t\t\tif (wpm.shouldScriptBeActive(node)) {\n\t\t\t\t\t\t\twpm.unblockScript(node)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twpm.blockScript(node)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t})\n\t})\n\n\twpm.scriptTagObserver.observe(document.head, {childList: true, subtree: true})\n\tjQuery(document).on(\"DOMContentLoaded\", () => wpm.scriptTagObserver.disconnect())\n\n\twpm.shouldScriptBeActive = node => {\n\n\t\tif (\n\t\t\twpmDataLayer.shop.cookie_consent_mgmt.explicit_consent ||\n\t\t\twpmConsentValues.visitorHasChosen\n\t\t) {\n\n\t\t\tif (wpmConsentValues.mode === \"category\" && $(node).data(\"wpm-cookie-category\").split(\",\").some(element => wpmConsentValues.categories[element])) {\n\t\t\t\treturn true\n\t\t\t} else if (wpmConsentValues.mode === \"pixel\" && wpmConsentValues.pixels.includes($(node).data(\"wpm-pixel-name\"))) {\n\t\t\t\treturn true\n\t\t\t} else if (wpmConsentValues.mode === \"pixel\" && $(node).data(\"wpm-pixel-name\") === \"google\" && [\"google-analytics\", \"google-ads\"].some(element => wpmConsentValues.pixels.includes(element))) {\n\t\t\t\treturn true\n\t\t\t} else if (wpmDataLayer?.pixels?.google?.consent_mode?.active && $(node).data(\"wpm-pixel-name\") === \"google\") {\n\t\t\t\treturn true\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t} else {\n\t\t\treturn true\n\t\t}\n\t}\n\n\n\twpm.unblockScript = (scriptNode, removeAttach = false) => {\n\n\t\tif (removeAttach) $(scriptNode).remove()\n\n\t\tlet wpmSrc = $(scriptNode).data(\"wpm-src\")\n\t\tif (wpmSrc) $(scriptNode).attr(\"src\", wpmSrc)\n\n\t\tscriptNode.type = \"text/javascript\"\n\n\t\tif (removeAttach) $(scriptNode).appendTo(\"head\")\n\n\t\tjQuery(document).trigger(\"wpmPreLoadPixels\", {})\n\t}\n\n\twpm.blockScript = (scriptNode, removeAttach = false) => {\n\n\t\tif (removeAttach) $(scriptNode).remove()\n\n\t\tif ($(scriptNode).attr(\"src\")) $(scriptNode).removeAttr(\"src\")\n\t\tscriptNode.type = \"blocked/javascript\"\n\n\t\tif (removeAttach) $(scriptNode).appendTo(\"head\")\n\t}\n\n\twpm.unblockAllScripts = (analytics = true, ads = true) => {\n\t\tjQuery(document).trigger(\"wpmPreLoadPixels\", {})\n\t}\n\n\twpm.unblockSelectedPixels = () => {\n\t\tjQuery(document).trigger(\"wpmPreLoadPixels\", {})\n\t}\n\n\n\t/**\n\t * Block or unblock scripts for each CMP immediately after cookie consent has been updated\n\t * by the visitor.\n\t */\n\n\t// Borlabs Cookie\n\t// If visitor accepts cookies in Borlabs Cookie unblock the scripts\n\tjQuery(document).on(\"borlabs-cookie-consent-saved\", () => {\n\n\t\twpm.updateConsentCookieValues()\n\n\t\tif (wpmConsentValues.mode === \"pixel\") {\n\n\t\t\twpm.unblockSelectedPixels()\n\t\t\twpm.updateGoogleConsentMode(wpmConsentValues.pixels.includes(\"google-analytics\"), wpmConsentValues.pixels.includes(\"google-ads\"))\n\t\t} else {\n\n\t\t\twpm.unblockAllScripts(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t\t\twpm.updateGoogleConsentMode(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t\t}\n\t})\n\n\t// Cookiebot\n\t// If visitor accepts cookies in Cookiebot unblock the scripts\n\t// https://www.cookiebot.com/en/developer/\n\tjQuery(document).on(\"CookiebotOnAccept\", () => {\n\n\t\tif (Cookiebot.consent.statistics) wpmConsentValues.categories.analytics = true\n\t\tif (Cookiebot.consent.marketing) wpmConsentValues.categories.ads = true\n\n\t\twpm.unblockAllScripts(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t\twpm.updateGoogleConsentMode(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\n\t}, false)\n\n\t/**\n\t * Cookie Script\n\t * If visitor accepts cookies in Cookie Script unblock the scripts\n\t * https://support.cookie-script.com/article/20-custom-events\n\t */\n\tjQuery(document).on(\"CookieScriptAccept\", e => {\n\n\t\tif (e.detail.categories.includes(\"performance\")) wpmConsentValues.categories.analytics = true\n\t\tif (e.detail.categories.includes(\"targeting\")) wpmConsentValues.categories.ads = true\n\n\t\twpm.unblockAllScripts(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t\twpm.updateGoogleConsentMode(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t})\n\n\t/**\n\t * Cookie Script\n\t * If visitor accepts cookies in Cookie Script unblock the scripts\n\t * https://support.cookie-script.com/\n\t */\n\tjQuery(document).on(\"CookieScriptAcceptAll\", () => {\n\n\t\twpm.unblockAllScripts(true, true)\n\t\twpm.updateGoogleConsentMode(true, true)\n\t})\n\n\t/**\n\t * Complianz Cookie\n\t *\n\t * If visitor accepts cookies in Complianz unblock the scripts\n\t */\n\n\twpm.cmplzStatusChange = (cmplzConsentData) => {\n\n\t\tif (cmplzConsentData.detail.categories.includes(\"statistics\")) wpm.updateConsentCookieValues(true, null)\n\t\tif (cmplzConsentData.detail.categories.includes(\"marketing\")) wpm.updateConsentCookieValues(null, true)\n\n\t\twpm.unblockAllScripts(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t\twpm.updateGoogleConsentMode(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t}\n\n\tjQuery(document).on(\"cmplzStatusChange\", wpm.cmplzStatusChange)\n\tjQuery(document).on(\"cmplz_status_change\", wpm.cmplzStatusChange)\n\n\n\t// Cookie Compliance by hu-manity.co (free and pro)\n\t// If visitor accepts cookies in Cookie Notice by hu-manity.co unblock the scripts (free version)\n\t// https://wordpress.org/support/topic/events-on-consent-change/#post-15202792\n\tjQuery(document).on(\"setCookieNotice\", () => {\n\n\t\twpm.updateConsentCookieValues()\n\n\t\twpm.unblockAllScripts(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t\twpm.updateGoogleConsentMode(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t})\n\n\t/**\n\t * Cookie Compliance by hu-manity.co (free and pro)\n\t * If visitor accepts cookies in Cookie Notice by hu-manity.co unblock the scripts (pro version)\n\t * https://wordpress.org/support/topic/events-on-consent-change/#post-15202792\n\t * Because Cookie Notice has no documented API or event that is being triggered on consent save or update\n\t * we have to solve this by using a mutation observer.\n\t *\n\t * @type {MutationObserver}\n\t */\n\n\twpm.huObserver = new MutationObserver(mutations => {\n\t\tmutations.forEach(({addedNodes}) => {\n\t\t\t[...addedNodes]\n\t\t\t\t.forEach(node => {\n\n\t\t\t\t\tif (node.id === \"hu\") {\n\n\t\t\t\t\t\tjQuery(\".hu-cookies-save\").on(\"click\", function () {\n\t\t\t\t\t\t\twpm.updateConsentCookieValues()\n\t\t\t\t\t\t\twpm.unblockAllScripts(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t\t\t\t\t\t\twpm.updateGoogleConsentMode(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t})\n\t})\n\n\tif (window.hu) {\n\t\twpm.huObserver.observe(document.documentElement || document.body, {childList: true, subtree: true})\n\t}\n\n\twpm.explicitConsentStateAlreadySet = () => {\n\n\t\tif (wpmConsentValues.explicitConsentStateAlreadySet) {\n\t\t\treturn true\n\t\t} else {\n\t\t\twpmConsentValues.explicitConsentStateAlreadySet = true\n\t\t}\n\t}\n\n\n}(window.wpm = window.wpm || {}, jQuery))\n","/**\n * Register event listeners\n */\n\n// remove_from_cart event\n// jQuery('.remove_from_cart_button, .remove').on('click', function (e) {\njQuery(document).on(\"click\", \".remove_from_cart_button, .remove\", function () {\n\n\ttry {\n\n\t\tlet url       = new URL(jQuery(this).attr(\"href\"))\n\t\tlet productId = wpm.getProductIdByCartItemKeyUrl(url)\n\n\t\twpm.removeProductFromCart(productId)\n\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n\n// add_to_cart event\n// jQuery('.add_to_cart_button:not(.product_type_variable), .ajax_add_to_cart, .js-ajax-add-to-cart, .single_add_to_cart_button, .btn_color-2').on('click', function (e) {\njQuery(document).on(\"click\", \".add_to_cart_button:not(.product_type_variable), .ajax_add_to_cart, .single_add_to_cart_button\", function () {\n\n\ttry {\n\n\t\tif (wpmDataLayer.shop.page_type === \"product\") {\n\n\t\t\t// First process related and upsell products\n\t\t\tif (typeof jQuery(this).attr(\"href\") !== \"undefined\" && jQuery(this).attr(\"href\").includes(\"add-to-cart\")) {\n\n\t\t\t\tlet quantity  = 1\n\t\t\t\tlet productId = jQuery(this).data(\"product_id\")\n\n\t\t\t\twpm.addProductToCart(productId, quantity)\n\t\t\t} else {\n\n\t\t\t\tif (wpmDataLayer.shop.product_type === \"simple\") {\n\n\t\t\t\t\tlet quantity = Number(jQuery(\".input-text.qty\").val())\n\n\t\t\t\t\tif (!quantity && quantity !== 0) quantity = 1\n\n\t\t\t\t\tlet productId = jQuery(this).val()\n\n\t\t\t\t\twpm.addProductToCart(productId, quantity)\n\n\t\t\t\t} else if (wpmDataLayer.shop.product_type === \"variable\") {\n\n\t\t\t\t\tlet quantity = Number(jQuery(\".input-text.qty\").val())\n\n\t\t\t\t\tif (!quantity && quantity !== 0) quantity = 1\n\n\t\t\t\t\tlet productId = jQuery(\"[name='variation_id']\").val()\n\n\t\t\t\t\twpm.addProductToCart(productId, quantity)\n\n\t\t\t\t} else if (wpmDataLayer.shop.product_type === \"grouped\") {\n\n\t\t\t\t\tjQuery(\".woocommerce-grouped-product-list-item\").each(function () {\n\n\t\t\t\t\t\tlet quantity = Number(jQuery(this).find(\".input-text.qty\").val())\n\n\t\t\t\t\t\tif (!quantity && quantity !== 0) quantity = 1\n\n\t\t\t\t\t\tlet classes   = jQuery(this).attr(\"class\")\n\t\t\t\t\t\tlet productId = wpm.getPostIdFromString(classes)\n\n\t\t\t\t\t\twpm.addProductToCart(productId, quantity)\n\t\t\t\t\t})\n\t\t\t\t} else if (wpmDataLayer.shop.product_type === \"bundle\") {\n\n\t\t\t\t\tlet quantity = Number(jQuery(\".input-text.qty\").val())\n\n\t\t\t\t\tif (!quantity && quantity !== 0) quantity = 1\n\n\t\t\t\t\tlet productId = jQuery(\"input[name=add-to-cart]\").val()\n\n\t\t\t\t\twpm.addProductToCart(productId, quantity)\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\n\t\t\tlet quantity  = 1\n\t\t\tlet productId = jQuery(this).data(\"product_id\")\n\n\t\t\twpm.addProductToCart(productId, quantity)\n\t\t}\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n\n/**\n * If someone clicks anywhere on a custom /?add-to-cart=123 link\n * trigger the add to cart event\n */\n// jQuery('a:not(.add_to_cart_button, .ajax_add_to_cart, .single_add_to_cart_button)').one('click', function (event) {\njQuery(document).one(\"click\", \"a:not(.add_to_cart_button, .ajax_add_to_cart, .single_add_to_cart_button)\", function (event) {\n\n\ttry {\n\t\tif (jQuery(event.target).closest(\"a\").attr(\"href\")) {\n\n\t\t\tlet href = jQuery(event.target).closest(\"a\").attr(\"href\")\n\n\t\t\tif (href.includes(\"add-to-cart=\")) {\n\n\t\t\t\tlet matches = href.match(/(add-to-cart=)(\\d+)/)\n\t\t\t\tif (matches) wpm.addProductToCart(matches[2], 1)\n\t\t\t}\n\t\t}\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// select_content GA UA event\n// select_item GA 4 event\n// jQuery(document).on('click', '.woocommerce-LoopProduct-link, .wc-block-grid__product, .product-small.box', function (e) {\n// jQuery('.woocommerce-LoopProduct-link, .wc-block-grid__product, .product, .product-small, .type-product').on('click', function (e) {\njQuery(document).on(\"click\", \".woocommerce-LoopProduct-link, .wc-block-grid__product, .product, .product-small, .type-product\", function () {\n\n\ttry {\n\n\t\t/**\n\t\t * On some pages the event fires multiple times, and on product pages\n\t\t * even on page load. Using e.stopPropagation helps to prevent this,\n\t\t * but I don't know why. We don't even have to use this, since only a real\n\t\t * product click yields a valid productId. So we filter the invalid click\n\t\t * events out later down in the code. I'll keep it that way because this is\n\t\t * the most compatible way across shops.\n\t\t *\n\t\t * e.stopPropagation();\n\t\t * */\n\n\t\tlet productId = jQuery(this).nextAll(\".wpmProductId:first\").data(\"id\")\n\n\t\t/**\n\t\t * On product pages, for some reason, the click event is triggered on the main product on page load.\n\t\t * In that case no ID is found. But we can discard it, since we only want to trigger the event on\n\t\t * related products, which are found below.\n\t\t */\n\n\t\tif (productId) {\n\n\t\t\tproductId = wpm.getIdBasedOndVariationsOutputSetting(productId)\n\n\t\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n\n\t\t\tif (wpmDataLayer.products && wpmDataLayer.products[productId]) {\n\n\t\t\t\tlet product = wpm.getProductDetailsFormattedForEvent(productId)\n\n\t\t\t\tjQuery(document).trigger(\"wpmSelectContentGaUa\", product)\n\t\t\t\tjQuery(document).trigger(\"wpmSelectItem\", product)\n\t\t\t}\n\t\t}\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// begin_checkout event\nlet checkoutButtonClasses = [\n\t\".checkout-button\",\n\t\".cart-checkout-button\",\n\t\".button.checkout\",\n\t\".xoo-wsc-ft-btn-checkout\", // https://xootix.com/side-cart-for-woocommerce/\n]\n\njQuery(document).one(\"click\", checkoutButtonClasses.join(\",\"), function () {\n\tjQuery(document).trigger(\"wpmBeginCheckout\")\n})\n\n\n// checkout_progress event\n// track checkout option event: entered valid billing email\njQuery(document).on(\"input\", \"#billing_email\", function () {\n\n\tif (wpm.isEmail(jQuery(this).val())) {\n\t\t// wpm.fireCheckoutOption(2);\n\t\twpm.fireCheckoutProgress(2)\n\t\twpm.emailSelected = true\n\t}\n})\n\n// track checkout option event: purchase click\njQuery(document).on(\"click\", \".wc_payment_methods\", function () {\n\n\tif (false === wpm.paymentMethodSelected) {\n\t\twpm.fireCheckoutProgress(3)\n\t}\n\n\twpm.fireCheckoutOption(3, jQuery(\"input[name='payment_method']:checked\").val())\n\twpm.paymentMethodSelected = true\n})\n\n// track checkout option event: purchase click\n// jQuery('#place_order').one('click',  function () {\njQuery(document).one(\"click\", \"#place_order\", function () {\n\n\tif (false === wpm.emailSelected) {\n\t\twpm.fireCheckoutProgress(2)\n\t}\n\n\tif (false === wpm.paymentMethodSelected) {\n\t\twpm.fireCheckoutProgress(3)\n\t\twpm.fireCheckoutOption(3, jQuery(\"input[name='payment_method']:checked\").val())\n\t}\n\n\twpm.fireCheckoutProgress(4)\n})\n\n// update cart event\n//     jQuery(\"[name='update_cart']\").on('click',  function (e) {\njQuery(document).on(\"click\", \"[name='update_cart']\", function () {\n\n\ttry {\n\t\tjQuery(\".cart_item\").each(function () {\n\n\t\t\tlet url       = new URL(jQuery(this).find(\".product-remove\").find(\"a\").attr(\"href\"))\n\t\t\tlet productId = wpm.getProductIdByCartItemKeyUrl(url)\n\n\n\t\t\tlet quantity = jQuery(this).find(\".qty\").val()\n\n\t\t\tif (quantity === 0) {\n\t\t\t\twpm.removeProductFromCart(productId)\n\t\t\t} else if (quantity < wpmDataLayer.cart[productId].quantity) {\n\t\t\t\twpm.removeProductFromCart(productId, wpmDataLayer.cart[productId].quantity - quantity)\n\t\t\t} else if (quantity > wpmDataLayer.cart[productId].quantity) {\n\t\t\t\twpm.addProductToCart(productId, quantity - wpmDataLayer.cart[productId].quantity)\n\t\t\t}\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t\twpm.getCartItemsFromBackend()\n\t}\n})\n\n\n// add_to_wishlist\njQuery(document).on(\"click\", \".add_to_wishlist, .wl-add-to\", function () {\n\n\ttry {\n\n\t\tlet productId\n\n\t\tif (jQuery(this).data(\"productid\")) { // for the WooCommerce wishlist plugin\n\n\t\t\tproductId = jQuery(this).data(\"productid\")\n\t\t} else if (jQuery(this).data(\"product-id\")) {  // for the YITH wishlist plugin\n\n\t\t\tproductId = jQuery(this).data(\"product-id\")\n\t\t}\n\n\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n\n\t\tlet product = wpm.getProductDetailsFormattedForEvent(productId)\n\n\t\tjQuery(document).trigger(\"wpmAddToWishlist\", product)\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\njQuery(document).on(\"updated_cart_totals\", function () {\n\tjQuery(document).trigger(\"wpmViewCart\")\n})\n\n\n/**\n * Called when the user selects all the required dropdowns / attributes\n *\n * Has to be hooked after document ready !\n *\n * https://stackoverflow.com/a/27849208/4688612\n * https://stackoverflow.com/a/65065335/4688612\n */\n\njQuery(function () {\n\n\tjQuery(\".single_variation_wrap\").on(\"show_variation\", function (event, variation) {\n\n\t\ttry {\n\t\t\tlet productId = wpm.getIdBasedOndVariationsOutputSetting(variation.variation_id)\n\n\t\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n\n\t\t\tif (wpmDataLayer.products && wpmDataLayer.products[productId]) {\n\n\t\t\t\tlet product = wpm.getProductDetailsFormattedForEvent(productId)\n\n\t\t\t\tjQuery(document).trigger(\"wpmViewItem\", product)\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t})\n})\n\n\n/**\n * Called on variable products when no selection has been done yet\n * or when the visitor deselects his choice.\n *\n * Has to be hooked after document ready !\n */\n\njQuery(function () {\n\n\tjQuery(\".single_variation_wrap\").on(\"hide_variation\", function () {\n\n\t\ttry {\n\t\t\tlet classes   = jQuery(\"body\").attr(\"class\")\n\t\t\tlet productId = classes.match(/(postid-)(\\d+)/)[2]\n\n\t\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n\n\t\t\t/**\n\t\t\t * If we have a variable product with no preset,\n\t\t\t * and variations output is enabled,\n\t\t\t * then we send a viewItem event with the first\n\t\t\t * variation we find for the parent.\n\t\t\t * If variations output is disabled,\n\t\t\t * we just send the parent ID.\n\t\t\t *\n\t\t\t * And if Facebook microdata is active, use the\n\t\t\t * microdata product ID.\n\t\t\t */\n\n\t\t\tif (\n\t\t\t\t\"variable\" === wpmDataLayer.shop.product_type &&\n\t\t\t\twpmDataLayer?.general?.variationsOutput\n\t\t\t) {\n\t\t\t\tfor (const [key, product] of Object.entries(wpmDataLayer.products)) {\n\t\t\t\t\tif (\"parentId\" in product) {\n\n\t\t\t\t\t\tproductId = product.id\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\n\t\t\t\tif (wpmDataLayer?.pixels?.facebook?.microdata_product_id) {\n\t\t\t\t\tproductId = wpmDataLayer.pixels.facebook.microdata_product_id\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (wpmDataLayer.products && wpmDataLayer.products[productId]) {\n\n\t\t\t\tlet product = wpm.getProductDetailsFormattedForEvent(productId)\n\n\t\t\t\tjQuery(document).trigger(\"wpmViewItem\", product)\n\t\t\t}\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t})\n})\n\n\n/**\n * Set up wpm events\n */\n\n// populate the wpmDataLayer with the cart items\njQuery(window).on(\"wpmLoad\", function () {\n\n\ttry {\n\t\t// When a new session is initiated there are no items in the cart,\n\t\t// so we can save the call to get the cart items\n\t\tif (wpm.doesWooCommerceCartExist()) wpm.getCartItems()\n\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// get all add-to-cart= products from backend\njQuery(window).on(\"wpmLoad\", function () {\n\n\twpmDataLayer.products = wpmDataLayer.products || {}\n\n\t// scan page for add-to-cart= links\n\tlet productIds = wpm.getAddToCartLinkProductIds()\n\n\twpm.getProductsFromBackend(productIds)\n})\n\n/**\n * Save the referrer into a cookie\n */\n\njQuery(window).on(\"wpmLoad\", function () {\n\n\t// can't use session storage as we can't read it from the server\n\tif (!wpm.getCookie(\"wpmReferrer\")) {\n\n\t\tif (document.referrer) {\n\t\t\tlet referrerUrl      = new URL(document.referrer)\n\t\t\tlet referrerHostname = referrerUrl.hostname\n\n\t\t\tif (referrerHostname !== window.location.host) {\n\t\t\t\twpm.setCookie(\"wpmReferrer\", referrerHostname)\n\t\t\t}\n\t\t}\n\t}\n})\n\n\n/**\n * Create our own load event in order to better handle script flow execution when JS \"optimizers\" shuffle the code.\n */\n\njQuery(window).on(\"wpmLoad\", function () {\n\ttry {\n\t\tif (typeof wpmDataLayer != \"undefined\" && !wpmDataLayer?.wpmLoadFired) {\n\n\t\t\tjQuery(document).trigger(\"wpmLoadAlways\")\n\n\t\t\tif (\"product\" === wpmDataLayer.shop.page_type && \"variable\" !== wpmDataLayer.shop.product_type && wpm.getMainProductIdFromProductPage()) {\n\n\t\t\t\tlet product = wpm.getProductDataForViewItemEvent(wpm.getMainProductIdFromProductPage())\n\t\t\t\tjQuery(document).trigger(\"wpmViewItem\", product)\n\n\t\t\t} else if (\"product_category\" === wpmDataLayer.shop.page_type) {\n\n\t\t\t\tjQuery(document).trigger(\"wpmCategory\")\n\n\t\t\t} else if (\"search\" === wpmDataLayer.shop.page_type) {\n\n\t\t\t\tjQuery(document).trigger(\"wpmSearch\")\n\n\t\t\t} else if (\"cart\" === wpmDataLayer.shop.page_type) {\n\n\t\t\t\tjQuery(document).trigger(\"wpmViewCart\")\n\n\t\t\t} else if (\"order_received_page\" === wpmDataLayer.shop.page_type && wpmDataLayer.order) {\n\n\t\t\t\tif (!wpm.isOrderIdStored(wpmDataLayer.order.id)) {\n\n\t\t\t\t\tjQuery(document).trigger(\"wpmOrderReceivedPage\")\n\t\t\t\t\twpm.writeOrderIdToStorage(wpmDataLayer.order.id)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tjQuery(document).trigger(\"wpmEverywhereElse\")\n\t\t\t}\n\n\t\t\tif (wpmDataLayer?.user?.id && !wpm.hasLoginEventFired()) {\n\t\t\t\tjQuery(document).trigger(\"wpmLogin\")\n\t\t\t\twpm.setLoginEventFired()\n\t\t\t}\n\n\t\t\t// /**\n\t\t\t//  * Load mini cart fragments into a wpm session storage key,\n\t\t\t//  * after the document load event.\n\t\t\t//  */\n\t\t\t// jQuery(document).ajaxSend(function (event, jqxhr, settings) {\n\t\t\t// \t// console.log('settings.url: ' + settings.url);\n\t\t\t//\n\t\t\t// \tif (settings.url.includes(\"get_refreshed_fragments\") && sessionStorage) {\n\t\t\t// \t\tif (!sessionStorage.getItem(\"wpmMiniCartActive\")) {\n\t\t\t// \t\t\tsessionStorage.setItem(\"wpmMiniCartActive\", JSON.stringify(true))\n\t\t\t// \t\t}\n\t\t\t// \t}\n\t\t\t// })\n\n\t\t\twpmDataLayer.wpmLoadFired = true\n\t\t}\n\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n/**\n * Load all pixels\n */\njQuery(window).on(\"wpmPreLoadPixels\", function () {\n\n\tif (wpmDataLayer?.shop?.cookie_consent_mgmt?.explicit_consent && !wpm.explicitConsentStateAlreadySet()) {\n\t\twpm.updateConsentCookieValues(null, null,true)\n\t}\n\n\tjQuery(document).trigger(\"wpmLoadPixels\", {})\n})\n","/**\n * Create a wpm namespace under which all functions are declared\n */\n\n// https://stackoverflow.com/a/5947280/4688612\n\n(function (wpm, $, undefined) {\n\n\tconst wpmDeduper = {\n\t\tkeyName          : \"_wpm_order_ids\",\n\t\tcookieExpiresDays: 365,\n\t}\n\n\tconst wpmRestSettings = {\n\t\t// cookiesAvailable                  : '_wpm_cookies_are_available',\n\t\tcookieWpmRestEndpointAvailable: \"_wpm_endpoint_available\",\n\t\trestEndpoint                  : \"/wp-json/\",\n\t\trestFails                     : 0,\n\t\trestFailsThreshold            : 10,\n\t}\n\n\twpm.emailSelected         = false\n\twpm.paymentMethodSelected = false\n\n\t// wpm.checkIfCookiesAvailable = function () {\n\t//\n\t//     // read the cookie if previously set, if it is return true, otherwise continue\n\t//     if (wpm.getCookie(wpmRestSettings.cookiesAvailable)) {\n\t//         return true;\n\t//     }\n\t//\n\t//     // set the cookie for the session\n\t//     Cookies.set(wpmRestSettings.cookiesAvailable, true);\n\t//\n\t//     // read cookie, true if ok, false if not ok\n\t//     return !!wpm.getCookie(wpmRestSettings.cookiesAvailable);\n\t// }\n\n\twpm.useRestEndpoint = () => {\n\n\t\t// only if sessionStorage is available\n\n\t\t// only if REST API endpoint is generally accessible\n\t\t// check in sessionStorage if we checked before and return answer\n\t\t// otherwise check if the endpoint is available, save answer in sessionStorage and return answer\n\n\t\t// only if not too many REST API errors happened\n\n\t\treturn wpm.isSessionStorageAvailable() &&\n\t\t\twpm.isRestEndpointAvailable() &&\n\t\t\twpm.isBelowRestErrorThreshold()\n\t}\n\n\twpm.isBelowRestErrorThreshold = () => window.sessionStorage.getItem(wpmRestSettings.restFails) <= wpmRestSettings.restFailsThreshold\n\n\twpm.isRestEndpointAvailable = () => {\n\n\t\tif (window.sessionStorage.getItem(wpmRestSettings.cookieWpmRestEndpointAvailable)) {\n\t\t\treturn JSON.parse(window.sessionStorage.getItem(wpmRestSettings.cookieWpmRestEndpointAvailable))\n\t\t} else {\n\t\t\t// return wpm.testEndpoint();\n\t\t\t// just set the value whenever possible in order not to wait or block the main thread\n\t\t\twpm.testEndpoint()\n\t\t}\n\t}\n\n\twpm.isSessionStorageAvailable = () => !!window.sessionStorage\n\n\twpm.testEndpoint = (\n\t\turl        = location.protocol + \"//\" + location.host + wpmRestSettings.restEndpoint,\n\t\tcookieName = wpmRestSettings.cookieWpmRestEndpointAvailable,\n\t) => {\n\t\t// console.log('testing endpoint');\n\n\t\tjQuery.ajax(url, {\n\t\t\ttype   : \"HEAD\",\n\t\t\ttimeout: 1000,\n\t\t\t// async: false,\n\t\t\tstatusCode: {\n\t\t\t\t200: function (response) {\n\t\t\t\t\t// Cookies.set(cookieName, true);\n\t\t\t\t\t// console.log('endpoint works');\n\t\t\t\t\twindow.sessionStorage.setItem(cookieName, JSON.stringify(true))\n\t\t\t\t},\n\t\t\t\t404: function (response) {\n\t\t\t\t\t// Cookies.set(cookieName, false);\n\t\t\t\t\t// console.log('endpoint doesn\\'t work');\n\t\t\t\t\twindow.sessionStorage.setItem(cookieName, JSON.stringify(false))\n\t\t\t\t},\n\t\t\t\t0  : function (response) {\n\t\t\t\t\t// Cookies.set(cookieName, false);\n\t\t\t\t\t// console.log('endpoint doesn\\'t work');\n\t\t\t\t\twindow.sessionStorage.setItem(cookieName, JSON.stringify(false))\n\t\t\t\t},\n\t\t\t},\n\t\t}).then(response => {\n\t\t\t// console.log('test done')\n\t\t\t// console.log('result: ' + JSON.parse(window.sessionStorage.getItem(cookieName)));\n\t\t\t// return JSON.parse(window.sessionStorage.getItem(cookieName));\n\t\t})\n\t}\n\n\twpm.isWpmRestEndpointAvailable = (cookieName = wpmRestSettings.cookieWpmRestEndpointAvailable) => !!wpm.getCookie(cookieName)\n\n\twpm.writeOrderIdToStorage = (orderId, expireDays = 365) => {\n\n\t\t// save the order ID in the browser storage\n\n\t\tif (!window.Storage) {\n\t\t\tlet expiresDate = new Date()\n\t\t\texpiresDate.setDate(expiresDate.getDate() + wpmDeduper.cookieExpiresDays)\n\n\t\t\tlet ids = []\n\t\t\tif (checkCookie()) {\n\t\t\t\tids = JSON.parse(wpm.getCookie(wpmDeduper.keyName))\n\t\t\t}\n\n\t\t\tif (!ids.includes(orderId)) {\n\t\t\t\tids.push(orderId)\n\t\t\t\tdocument.cookie = wpmDeduper.keyName + \"=\" + JSON.stringify(ids) + \";expires=\" + expiresDate.toUTCString()\n\t\t\t}\n\n\t\t} else {\n\t\t\tif (localStorage.getItem(wpmDeduper.keyName) === null) {\n\t\t\t\tlet ids = []\n\t\t\t\tids.push(orderId)\n\t\t\t\twindow.localStorage.setItem(wpmDeduper.keyName, JSON.stringify(ids))\n\n\t\t\t} else {\n\t\t\t\tlet ids = JSON.parse(localStorage.getItem(wpmDeduper.keyName))\n\t\t\t\tif (!ids.includes(orderId)) {\n\t\t\t\t\tids.push(orderId)\n\t\t\t\t\twindow.localStorage.setItem(wpmDeduper.keyName, JSON.stringify(ids))\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (typeof wpm.storeOrderIdOnServer === \"function\" && wpmDataLayer.orderDeduplication) {\n\t\t\twpm.storeOrderIdOnServer(orderId)\n\t\t}\n\t}\n\n\tfunction checkCookie() {\n\t\tlet key = wpm.getCookie(wpmDeduper.keyName)\n\t\treturn key !== \"\"\n\t}\n\n\twpm.isOrderIdStored = orderId => {\n\n\t\tif (wpmDataLayer.orderDeduplication) {\n\n\t\t\tif (!window.Storage) {\n\n\t\t\t\tif (checkCookie()) {\n\t\t\t\t\tlet ids = JSON.parse(wpm.getCookie(wpmDeduper.keyName))\n\t\t\t\t\treturn ids.includes(orderId)\n\t\t\t\t} else {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (localStorage.getItem(wpmDeduper.keyName) !== null) {\n\t\t\t\t\tlet ids = JSON.parse(localStorage.getItem(wpmDeduper.keyName))\n\t\t\t\t\treturn ids.includes(orderId)\n\t\t\t\t} else {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log(\"order duplication prevention: off\")\n\t\t\treturn false\n\t\t}\n\t}\n\n\twpm.isEmail = email => {\n\n\t\t// https://emailregex.com/\n\n\t\tlet regex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n\n\t\treturn regex.test(email)\n\t}\n\n\twpm.removeProductFromCart = (productId, quantityToRemove = null) => {\n\n\t\ttry {\n\n\t\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n\n\t\t\tproductId = wpm.getIdBasedOndVariationsOutputSetting(productId)\n\n\t\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n\n\t\t\tlet quantity\n\n\t\t\tif (quantityToRemove == null) {\n\t\t\t\tquantity = wpmDataLayer.cart[productId].quantity\n\t\t\t} else {\n\t\t\t\tquantity = quantityToRemove\n\t\t\t}\n\n\t\t\tif (wpmDataLayer.cart[productId]) {\n\n\t\t\t\tlet product = wpm.getProductDetailsFormattedForEvent(productId, quantity)\n\n\t\t\t\tjQuery(document).trigger(\"wpmRemoveFromCart\", product)\n\n\t\t\t\tif (quantityToRemove == null || wpmDataLayer.cart[productId].quantity === quantityToRemove) {\n\n\t\t\t\t\tdelete wpmDataLayer.cart[productId]\n\n\t\t\t\t\tif (sessionStorage) sessionStorage.setItem(\"wpmDataLayerCart\", JSON.stringify(wpmDataLayer.cart))\n\t\t\t\t} else {\n\n\t\t\t\t\twpmDataLayer.cart[productId].quantity = wpmDataLayer.cart[productId].quantity - quantity\n\n\t\t\t\t\tif (sessionStorage) sessionStorage.setItem(\"wpmDataLayerCart\", JSON.stringify(wpmDataLayer.cart))\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t\t// console.log('getting cart from back end');\n\t\t\t// wpm.getCartItemsFromBackend();\n\t\t\t// console.log('getting cart from back end done');\n\t\t}\n\t}\n\n\twpm.getIdBasedOndVariationsOutputSetting = productId => {\n\n\t\ttry {\n\t\t\tif (wpmDataLayer?.general?.variationsOutput) {\n\n\t\t\t\treturn productId\n\t\t\t} else {\n\t\t\t\tif (wpmDataLayer.products[productId].isVariation) {\n\n\t\t\t\t\treturn wpmDataLayer.products[productId].parentId\n\t\t\t\t} else {\n\n\t\t\t\t\treturn productId\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\t// add_to_cart\n\twpm.addProductToCart = (productId, quantity) => {\n\n\t\ttry {\n\n\t\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n\n\t\t\tproductId = wpm.getIdBasedOndVariationsOutputSetting(productId)\n\n\t\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n\n\t\t\tif (wpmDataLayer?.products[productId]) {\n\n\t\t\t\tlet product = wpm.getProductDetailsFormattedForEvent(productId, quantity)\n\n\t\t\t\tjQuery(document).trigger(\"wpmAddToCart\", product)\n\n\t\t\t\t// add product to cart wpmDataLayer['cart']\n\n\t\t\t\t// if the product already exists in the object, only add the additional quantity\n\t\t\t\t// otherwise create that product object in the wpmDataLayer['cart']\n\t\t\t\tif (wpmDataLayer?.cart[productId]) {\n\n\t\t\t\t\twpmDataLayer.cart[productId].quantity = wpmDataLayer.cart[productId].quantity + quantity\n\t\t\t\t} else {\n\n\t\t\t\t\tif (!(\"cart\" in wpmDataLayer)) wpmDataLayer.cart = {}\n\n\t\t\t\t\twpmDataLayer.cart[productId] = wpm.getProductDetailsFormattedForEvent(productId, quantity)\n\t\t\t\t}\n\n\t\t\t\tif (sessionStorage) sessionStorage.setItem(\"wpmDataLayerCart\", JSON.stringify(wpmDataLayer.cart))\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\n\t\t\t// fallback if wpmDataLayer.cart and wpmDataLayer.products got out of sync in case cart caching has an issue\n\t\t\twpm.getCartItemsFromBackend()\n\t\t}\n\t}\n\n\twpm.getCartItems = () => {\n\n\t\tif (sessionStorage) {\n\t\t\tif (!sessionStorage.getItem(\"wpmDataLayerCart\") || wpmDataLayer.shop.page_type === \"order_received_page\") {\n\t\t\t\tsessionStorage.setItem(\"wpmDataLayerCart\", JSON.stringify({}))\n\t\t\t} else {\n\t\t\t\twpm.saveCartObjectToDataLayer(JSON.parse(sessionStorage.getItem(\"wpmDataLayerCart\")))\n\t\t\t}\n\t\t} else {\n\t\t\twpm.getCartItemsFromBackend()\n\t\t}\n\t}\n\n\t// get all cart items from the backend\n\twpm.getCartItemsFromBackend = () => {\n\t\ttry {\n\t\t\tlet data = {\n\t\t\t\taction: \"wpm_get_cart_items\",\n\t\t\t}\n\n\t\t\tjQuery.ajax(\n\t\t\t\t{\n\t\t\t\t\ttype    : \"get\",\n\t\t\t\t\tdataType: \"json\",\n\t\t\t\t\t// url     : ajax_object.ajax_url,\n\t\t\t\t\turl    : wpm.ajax_url,\n\t\t\t\t\tdata   : data,\n\t\t\t\t\tsuccess: function (cartItems) {\n\n\t\t\t\t\t\t// save all cart items into wpmDataLayer\n\n\t\t\t\t\t\tif (!cartItems[\"cart\"]) cartItems[\"cart\"] = {}\n\n\t\t\t\t\t\twpm.saveCartObjectToDataLayer(cartItems[\"cart\"])\n\n\t\t\t\t\t\tif (sessionStorage) sessionStorage.setItem(\"wpmDataLayerCart\", JSON.stringify(cartItems[\"cart\"]))\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\t// get productIds from the backend\n\twpm.getProductsFromBackend = productIds => {\n\n\n\t\t// reduce productIds by products already in the dataLayer\n\t\tproductIds = productIds.filter(item => !wpmDataLayer.products.hasOwnProperty(item))\n\n\t\t// if no products IDs are in the object, don't try to get anything from the server\n\t\tif (!productIds || productIds.length === 0) return\n\n\t\ttry {\n\t\t\tlet data = {\n\t\t\t\taction    : \"wpm_get_product_ids\",\n\t\t\t\tproductIds: productIds,\n\t\t\t}\n\n\t\t\tjQuery.ajax(\n\t\t\t\t{\n\t\t\t\t\ttype    : \"get\",\n\t\t\t\t\tdataType: \"json\",\n\t\t\t\t\t// url     : ajax_object.ajax_url,\n\t\t\t\t\turl    : wpm.ajax_url,\n\t\t\t\t\tdata   : data,\n\t\t\t\t\tsuccess: function (products) {\n\n\t\t\t\t\t\t// merge products into wpmDataLayer.products\n\t\t\t\t\t\twpmDataLayer.products = Object.assign({}, wpmDataLayer.products, products)\n\t\t\t\t\t},\n\t\t\t\t\terror  : function (response) {\n\t\t\t\t\t\tconsole.log(response)\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\twpm.saveCartObjectToDataLayer = cartObject => {\n\n\t\twpmDataLayer.cart     = cartObject\n\t\twpmDataLayer.products = Object.assign({}, wpmDataLayer.products, cartObject)\n\t}\n\n\twpm.fireCheckoutOption = (step, checkout_option = null, value = null) => {\n\n\t\tlet data = {\n\t\t\tstep           : step,\n\t\t\tcheckout_option: checkout_option,\n\t\t\tvalue          : value,\n\t\t}\n\n\t\tjQuery(document).trigger(\"wpmFireCheckoutOption\", data)\n\t}\n\n\twpm.fireCheckoutProgress = step => {\n\n\t\tlet data = {\n\t\t\tstep: step,\n\t\t}\n\n\t\tjQuery(document).trigger(\"wpmFireCheckoutProgress\", data)\n\t}\n\n\twpm.getPostIdFromString = string => {\n\n\t\ttry {\n\t\t\treturn string.match(/(post-)(\\d+)/)[2]\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\twpm.triggerViewItemList = productId => {\n\n\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n\n\t\tproductId = wpm.getIdBasedOndVariationsOutputSetting(productId)\n\n\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n\n\t\tjQuery(document).trigger(\"wpmViewItemList\", wpm.getProductDataForViewItemEvent(productId))\n\t}\n\n\twpm.getProductDataForViewItemEvent = productId => {\n\n\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n\n\t\ttry {\n\t\t\tif (wpmDataLayer.products[productId]) {\n\n\t\t\t\treturn wpm.getProductDetailsFormattedForEvent(productId)\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\twpm.getMainProductIdFromProductPage = () => {\n\n\t\ttry {\n\t\t\tif ([\"simple\", \"variable\", \"grouped\", \"composite\", \"bundle\"].indexOf(wpmDataLayer.shop.product_type) >= 0) {\n\t\t\t\treturn jQuery(\".wpmProductId:first\").data(\"id\")\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\twpm.viewItemListTriggerTestMode = target => {\n\n\t\tjQuery(target).css({\"position\": \"relative\"})\n\t\tjQuery(target).append(\"<div id=\\\"viewItemListTriggerOverlay\\\"></div>\")\n\t\tjQuery(target).find(\"#viewItemListTriggerOverlay\").css({\n\t\t\t\"z-index\"         : \"10\",\n\t\t\t\"display\"         : \"block\",\n\t\t\t\"position\"        : \"absolute\",\n\t\t\t\"height\"          : \"100%\",\n\t\t\t\"top\"             : \"0\",\n\t\t\t\"left\"            : \"0\",\n\t\t\t\"right\"           : \"0\",\n\t\t\t\"opacity\"         : wpmDataLayer.viewItemListTrigger.opacity,\n\t\t\t\"background-color\": wpmDataLayer.viewItemListTrigger.backgroundColor,\n\t\t})\n\t}\n\n\twpm.getSearchTermFromUrl = () => {\n\n\t\ttry {\n\t\t\tlet urlParameters = new URLSearchParams(window.location.search)\n\t\t\treturn urlParameters.get(\"s\")\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\t// we need this to track timeouts for intersection observers\n\tlet ioTimeouts = {}\n\n\twpm.observerCallback = (entries, observer) => {\n\n\t\tentries.forEach((entry) => {\n\n\t\t\ttry {\n\t\t\t\tlet productId\n\n\t\t\t\tlet elementId = jQuery(entry.target).data(\"ioid\")\n\n\t\t\t\t// Get the productId from next element, if wpmProductId is a sibling, like in Gutenberg blocks\n\t\t\t\t// otherwise go search in children, like in regular WC loop items\n\t\t\t\tif (jQuery(entry.target).next(\".wpmProductId\").length) {\n\t\t\t\t\t// console.log('test 1');\n\t\t\t\t\tproductId = jQuery(entry.target).next(\".wpmProductId\").data(\"id\")\n\t\t\t\t} else {\n\t\t\t\t\tproductId = jQuery(entry.target).find(\".wpmProductId\").data(\"id\")\n\t\t\t\t}\n\n\n\t\t\t\tif (!productId) throw Error(\"wpmProductId element not found\")\n\n\t\t\t\tif (entry.isIntersecting) {\n\n\t\t\t\t\tioTimeouts[elementId] = setTimeout(() => {\n\n\t\t\t\t\t\twpm.triggerViewItemList(productId)\n\t\t\t\t\t\tif (wpmDataLayer.viewItemListTrigger.testMode) wpm.viewItemListTriggerTestMode(entry.target)\n\t\t\t\t\t\tif (wpmDataLayer.viewItemListTrigger.repeat === false) observer.unobserve(entry.target)\n\t\t\t\t\t}, wpmDataLayer.viewItemListTrigger.timeout)\n\n\t\t\t\t} else {\n\n\t\t\t\t\tclearTimeout(ioTimeouts[elementId])\n\t\t\t\t\tif (wpmDataLayer.viewItemListTrigger.testMode) jQuery(entry.target).find(\"#viewItemListTriggerOverlay\").remove()\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e)\n\t\t\t}\n\t\t})\n\t}\n\n\t// fire view_item_list only on products that have become visible\n\tlet io\n\tlet ioid = 0\n\tlet allIoElementsToWatch\n\n\tlet getAllElementsToWatch = () => {\n\n\t\tallIoElementsToWatch = jQuery(\".wpmProductId\")\n\t\t\t.map(function (i, elem) {\n\n\t\t\t\tif (\n\t\t\t\t\tjQuery(elem).parent().hasClass(\"type-product\") ||\n\t\t\t\t\tjQuery(elem).parent().hasClass(\"product\") ||\n\t\t\t\t\tjQuery(elem).parent().hasClass(\"product-item-inner\")\n\t\t\t\t) {\n\t\t\t\t\treturn jQuery(elem).parent()\n\t\t\t\t} else if (\n\t\t\t\t\tjQuery(elem).prev().hasClass(\"wc-block-grid__product\") ||\n\t\t\t\t\tjQuery(elem).prev().hasClass(\"product\") ||\n\t\t\t\t\tjQuery(elem).prev().hasClass(\"product-small\") ||\n\t\t\t\t\tjQuery(elem).prev().hasClass(\"woocommerce-LoopProduct-link\")\n\t\t\t\t) {\n\t\t\t\t\treturn jQuery(this).prev()\n\t\t\t\t} else if (jQuery(elem).closest(\".product\").length) {\n\t\t\t\t\treturn jQuery(elem).closest(\".product\")\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\twpm.startIntersectionObserverToWatch = () => {\n\n\t\ttry {\n\t\t\t// enable view_item_list test mode from browser\n\t\t\tif (wpm.urlHasParameter(\"vildemomode\")) wpmDataLayer.viewItemListTrigger.testMode = true\n\n\t\t\t// set up intersection observer\n\t\t\tio = new IntersectionObserver(wpm.observerCallback, {\n\t\t\t\tthreshold: wpmDataLayer.viewItemListTrigger.threshold,\n\t\t\t})\n\n\t\t\tgetAllElementsToWatch()\n\n\t\t\tallIoElementsToWatch.each((i, elem) => {\n\n\t\t\t\tjQuery(elem[0]).data(\"ioid\", ioid++)\n\n\t\t\t\tio.observe(elem[0])\n\t\t\t})\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\t// watch DOM for new lazy loaded products and add them to the intersection observer\n\twpm.startProductsMutationObserverToWatch = () => {\n\n\t\ttry {\n\t\t\t// Pass in the target node, as well as the observer options\n\n\t\t\t// selects the most common parent node\n\t\t\t// https://stackoverflow.com/a/7648323/4688612\n\t\t\tlet productsNode = jQuery(\".wpmProductId:eq(0)\").parents().has(jQuery(\".wpmProductId:eq(1)\").parents()).first()\n\n\t\t\tif (productsNode.length) {\n\t\t\t\tproductsMutationObserver.observe(productsNode[0], {\n\t\t\t\t\tattributes   : true,\n\t\t\t\t\tchildList    : true,\n\t\t\t\t\tcharacterData: true,\n\t\t\t\t})\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\t// Create an observer instance\n\tlet productsMutationObserver = new MutationObserver(mutations => {\n\n\t\tmutations.forEach(mutation => {\n\t\t\tlet newNodes = mutation.addedNodes // DOM NodeList\n\t\t\tif (newNodes !== null) { // If there are new nodes added\n\t\t\t\tlet nodes = jQuery(newNodes) // jQuery set\n\t\t\t\tnodes.each(function () {\n\t\t\t\t\tif (\n\t\t\t\t\t\tjQuery(this).hasClass(\"type-product\") ||\n\t\t\t\t\t\tjQuery(this).hasClass(\"product-small\") ||\n\t\t\t\t\t\tjQuery(this).hasClass(\"wc-block-grid__product\")\n\t\t\t\t\t) {\n\t\t\t\t\t\t// check if the node has a child or sibling wpmProductId\n\t\t\t\t\t\t// if yes add it to the intersectionObserver\n\t\t\t\t\t\tif (hasWpmProductIdElement(this)) {\n\t\t\t\t\t\t\tjQuery(this).data(\"ioid\", ioid++)\n\t\t\t\t\t\t\tio.observe(this)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t})\n\n\tlet hasWpmProductIdElement = elem =>\n\t\t!!(jQuery(elem).find(\".wpmProductId\").length ||\n\t\tjQuery(elem).siblings(\".wpmProductId\").length)\n\n\twpm.setCookie = (cookieName, cookieValue = \"\", expiryDays = null) => {\n\n\t\tif (expiryDays) {\n\n\t\t\tlet d = new Date()\n\t\t\td.setTime(d.getTime() + (expiryDays * 24 * 60 * 60 * 1000))\n\t\t\tlet expires     = \"expires=\" + d.toUTCString()\n\t\t\tdocument.cookie = cookieName + \"=\" + cookieValue + \";\" + expires + \";path=/\"\n\t\t} else {\n\t\t\tdocument.cookie = cookieName + \"=\" + cookieValue + \";path=/\"\n\t\t}\n\t}\n\n\twpm.getCookie = cookieName => {\n\n\t\tlet name          = cookieName + \"=\"\n\t\tlet decodedCookie = decodeURIComponent(document.cookie)\n\t\tlet ca            = decodedCookie.split(\";\")\n\n\t\tfor (let i = 0; i < ca.length; i++) {\n\n\t\t\tlet c = ca[i]\n\n\t\t\twhile (c.charAt(0) == \" \") {\n\t\t\t\tc = c.substring(1)\n\t\t\t}\n\n\t\t\tif (c.indexOf(name) == 0) {\n\t\t\t\treturn c.substring(name.length, c.length)\n\t\t\t}\n\t\t}\n\n\t\treturn \"\"\n\t}\n\n\twpm.getWpmSessionData = () => {\n\n\t\tif (window.sessionStorage) {\n\n\t\t\tlet data = window.sessionStorage.getItem(\"_wpm\")\n\n\t\t\tif (data !== null) {\n\t\t\t\treturn JSON.parse(data)\n\t\t\t} else {\n\t\t\t\treturn {}\n\t\t\t}\n\t\t} else {\n\t\t\treturn {}\n\t\t}\n\t}\n\n\twpm.setWpmSessionData = data => {\n\t\tif (window.sessionStorage) {\n\t\t\twindow.sessionStorage.setItem(\"_wpm\", JSON.stringify(data))\n\t\t}\n\t}\n\n\twpm.storeOrderIdOnServer = orderId => {\n\n\t\ttry {\n\t\t\t// save the state in the database\n\t\t\tlet data = {\n\t\t\t\taction  : \"wpm_purchase_pixels_fired\",\n\t\t\t\torder_id: orderId,\n\t\t\t\t// nonce   : ajax_object.nonce,\n\t\t\t\tnonce: wpm.nonce,\n\t\t\t}\n\n\t\t\tjQuery.ajax(\n\t\t\t\t{\n\t\t\t\t\ttype    : \"post\",\n\t\t\t\t\tdataType: \"json\",\n\t\t\t\t\t// url     : ajax_object.ajax_url,\n\t\t\t\t\turl    : wpm.ajax_url,\n\t\t\t\t\tdata   : data,\n\t\t\t\t\tsuccess: function (response) {\n\t\t\t\t\t\tif (response.success === false) {\n\t\t\t\t\t\t\tconsole.log(response)\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\terror  : function (response) {\n\t\t\t\t\t\tconsole.log(response)\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\twpm.getProductIdByCartItemKeyUrl = url => {\n\n\t\tlet searchParams = new URLSearchParams(url.search)\n\t\tlet cartItemKey  = searchParams.get(\"remove_item\")\n\n\t\tlet productId\n\n\t\tif (wpmDataLayer.cartItemKeys[cartItemKey][\"variation_id\"] === 0) {\n\t\t\tproductId = wpmDataLayer.cartItemKeys[cartItemKey][\"product_id\"]\n\t\t} else {\n\t\t\tproductId = wpmDataLayer.cartItemKeys[cartItemKey][\"variation_id\"]\n\t\t}\n\n\t\treturn productId\n\t}\n\n\twpm.getAddToCartLinkProductIds = () =>\n\t\tjQuery(\"a\").map(function () {\n\t\t\tlet href = jQuery(this).attr(\"href\")\n\n\t\t\tif (href && href.includes(\"?add-to-cart=\")) {\n\t\t\t\tlet matches = href.match(/(add-to-cart=)(\\d+)/)\n\t\t\t\tif (matches) return matches[2]\n\t\t\t}\n\t\t}).get()\n\n\twpm.getProductDetailsFormattedForEvent = (productId, quantity = 1) => {\n\n\t\tlet product = {\n\t\t\tid           : productId.toString(),\n\t\t\tdyn_r_ids    : wpmDataLayer.products[productId].dyn_r_ids,\n\t\t\tname         : wpmDataLayer.products[productId].name,\n\t\t\tlist_name    : wpmDataLayer.shop.list_name,\n\t\t\tbrand        : wpmDataLayer.products[productId].brand,\n\t\t\tcategory     : wpmDataLayer.products[productId].category,\n\t\t\tvariant      : wpmDataLayer.products[productId].variant,\n\t\t\tlist_position: wpmDataLayer.products[productId].position,\n\t\t\tquantity     : quantity,\n\t\t\tprice        : wpmDataLayer.products[productId].price,\n\t\t\tcurrency     : wpmDataLayer.shop.currency,\n\t\t\tisVariable   : wpmDataLayer.products[productId].isVariable,\n\t\t\tisVariation  : wpmDataLayer.products[productId].isVariation,\n\t\t\tparentId     : wpmDataLayer.products[productId].parentId,\n\t\t}\n\n\t\tif (product.isVariation) product[\"parentId_dyn_r_ids\"] = wpmDataLayer.products[productId].parentId_dyn_r_ids\n\n\t\treturn product\n\t}\n\n\twpm.setReferrerToCookie = () => {\n\n\t\t// can't use session storage as we can't read it from the server\n\t\tif (!wpm.getCookie(\"wpmReferrer\")) {\n\t\t\twpm.setCookie(\"wpmReferrer\", document.referrer)\n\t\t}\n\t}\n\n\twpm.getReferrerFromCookie = () => {\n\n\t\tif (wpm.getCookie(\"wpmReferrer\")) {\n\t\t\treturn wpm.getCookie(\"wpmReferrer\")\n\t\t} else {\n\t\t\treturn null\n\t\t}\n\t}\n\n\twpm.getClidFromBrowser = (clidId = \"gclid\") => {\n\n\t\tlet clidCookieId\n\n\t\tclidCookieId = {\n\t\t\tgclid: \"_gcl_aw\",\n\t\t\tdclid: \"_gcl_dc\",\n\t\t}\n\n\t\tif (wpm.getCookie(clidCookieId[clidId])) {\n\n\t\t\tlet clidCookie = wpm.getCookie(clidCookieId[clidId])\n\t\t\tlet matches    = clidCookie.match(/(GCL.[\\d]*.)(.*)/)\n\t\t\treturn matches[2]\n\t\t} else {\n\t\t\treturn \"\"\n\t\t}\n\t}\n\n\twpm.getUserAgent = () => navigator.userAgent\n\n\twpm.getViewPort = () => ({\n\t\twidth : Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0),\n\t\theight: Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0),\n\t})\n\n\n\twpm.version = () => {\n\t\tconsole.log(wpmDataLayer.version)\n\t}\n\n\t// https://api.jquery.com/jquery.getscript/\n\twpm.loadScriptAndCacheIt = (url, options) => {\n\n\t\t// Allow user to set any option except for dataType, cache, and url\n\t\toptions = jQuery.extend(options || {}, {\n\t\t\tdataType: \"script\",\n\t\t\tcache   : true,\n\t\t\turl     : url,\n\t\t})\n\n\t\t// Use $.ajax() since it is more flexible than $.getScript\n\t\t// Return the jqXHR object so we can chain callbacks\n\t\treturn jQuery.ajax(options)\n\t}\n\n\twpm.getOrderItemPrice = orderItem => (orderItem.total + orderItem.total_tax) / orderItem.quantity\n\n\twpm.hasLoginEventFired = () => {\n\t\tlet data = wpm.getWpmSessionData()\n\t\treturn data?.loginEventFired\n\t}\n\n\twpm.setLoginEventFired = () => {\n\t\tlet data                = wpm.getWpmSessionData()\n\t\tdata[\"loginEventFired\"] = true\n\t\twpm.setWpmSessionData(data)\n\t}\n\n\twpm.wpmDataLayerExists = () => new Promise(resolve => {\n\t\t(function waitForVar() {\n\t\t\tif (typeof wpmDataLayer !== \"undefined\") return resolve()\n\t\t\tsetTimeout(waitForVar, 50)\n\t\t})()\n\t})\n\n\twpm.jQueryExists = () => new Promise(resolve => {\n\t\t(function waitForjQuery() {\n\t\t\tif (typeof jQuery !== \"undefined\") return resolve()\n\t\t\tsetTimeout(waitForjQuery, 100)\n\t\t})()\n\t})\n\n\twpm.pageLoaded = () => new Promise(resolve => {\n\t\t(function waitForVar() {\n\t\t\tif (\"complete\" === document.readyState) return resolve()\n\t\t\tsetTimeout(waitForVar, 50)\n\t\t})()\n\t})\n\n\twpm.pageReady = () => {\n\t\treturn new Promise(resolve => {\n\t\t\t(function waitForVar() {\n\t\t\t\tif (\"interactive\" === document.readyState || \"complete\" === document.readyState) return resolve()\n\t\t\t\tsetTimeout(waitForVar, 50)\n\t\t\t})()\n\t\t})\n\t}\n\n\twpm.isMiniCartActive = () => {\n\t\tif (window.sessionStorage) {\n\t\t\tfor (const [key, value] of Object.entries(window.sessionStorage)) {\n\t\t\t\tif (key.includes(\"wc_fragments\")) {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false\n\t\t} else {\n\t\t\treturn false\n\t\t}\n\t}\n\n\twpm.doesWooCommerceCartExist = () => document.cookie.includes(\"woocommerce_items_in_cart\")\n\n\twpm.urlHasParameter = parameter => {\n\t\tlet urlParams = new URLSearchParams(window.location.search)\n\t\treturn urlParams.has(parameter)\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery))\n","/**\n * Load all WPM functions\n *\n * Ignore event listeners. They need to be loaded after\n * we made sure that jQuery has been loaded.\n */\n\nrequire(\"./functions\")\nrequire(\"./cookie_consent\")\n\n// #if process.env.TIER === 'premium'\n// require(\"./functions_premium\")\n// #endif\n","/**\n * After WPM is loaded\n * we first check if wpmDataLayer is loaded,\n * and as soon as it is, we load the pixels,\n * and as soon as the page load is complete,\n * we fire the wpmLoad event.\n *\n * @param {{pro:bool}} wpmDataLayer.version\n *\n * https://stackoverflow.com/a/25868457/4688612\n * https://stackoverflow.com/a/44093516/4688612\n */\n\nwpm.wpmDataLayerExists()\n\t.then(function () {\n\t\tconsole.log(\"WooCommerce Pixel Manager: \" + (wpmDataLayer.version.pro ? \"Pro\" : \"Free\") +\" Version \" + wpmDataLayer.version.number + \" loaded\")\n\t\tjQuery(document).trigger(\"wpmPreLoadPixels\", {})\n\t})\n\t.then(function () {\n\t\twpm.pageLoaded().then(function () {\n\t\t\tjQuery(document).trigger(\"wpmLoad\", {})\n\t\t})\n\t})\n\n\n\n/**\n * Run when page is ready\n *\n */\n\nwpm.pageReady().then(function () {\n\n\t/**\n\t * Run as soon as wpm namespace is loaded\n\t */\n\n\twpm.wpmDataLayerExists()\n\t\t.then(function () {\n\t\t\t// watch for products visible in viewport\n\t\t\twpm.startIntersectionObserverToWatch()\n\n\t\t\t// watch for lazy loaded products\n\t\t\twpm.startProductsMutationObserverToWatch()\n\t\t})\n})\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/**\n *  Load all essential scripts first\n */\n\nrequire(\"./wpm/functions_loader\")\n\n// Only load the event listeners after jQuery has been loaded for sure\nwpm.jQueryExists().then(function () {\n\n\trequire(\"./wpm/event_listeners\")\n\n\trequire(\"./google/loader\")\n\trequire(\"./facebook/loader\")\n\trequire(\"./hotjar/loader\")\n\n\t/**\n\t *  Load all premium scripts\n\t */\n\n\t// #if process.env.TIER === 'premium'\n// \trequire(\"./microsoft-ads/loader\")\n// \trequire(\"./pinterest/loader\")\n// \trequire(\"./snapchat/loader\")\n// \trequire(\"./tiktok/loader\")\n// \trequire(\"./twitter/loader\")\n\t// #endif\n\n\n\t/**\n\t * Initiate WPM.\n\t *\n\t * It makes sure that the script flow gets executed correctly,\n\t * no matter how JS \"optimizers\" shuffle the code.\n\t */\n\n\trequire(\"./wpm/init\")\n})\n\n"],"names":["jQuery","document","on","wpmDataLayer","pixels","facebook","pixel_id","loaded","wpm","canIFire","loadFacebookPixel","event","product","eventId","getRandomEventId","fbq","content_type","content_name","name","content_ids","dyn_r_ids","dynamic_remarketing","id_type","value","parseFloat","quantity","price","currency","eventID","shop","trigger","event_name","event_id","user_data","getFbUserData","product_data","product_id","event_source_url","window","location","href","e","console","error","fbViewContent","setFbUserData","order","value_filtered","facebookContentIds","id","$","undefined","fBUserData","f","b","n","callMethod","apply","arguments","queue","push","_fbq","version","t","createElement","async","src","s","getElementsByTagName","parentNode","insertBefore","Math","random","toString","substring","getFbUserDataFromBrowser","data","getCookie","fbp","user","external_id","navigator","userAgent","client_user_agent","prodIds","key","item","Object","entries","items","general","variationsOutput","variation_id","String","products","trackCustomFacebookEvent","eventName","require","isEmptyObject","google","ads","conversionIds","status","googleConfigConditionsMet","isVariable","send_events_with_parent_ids","gtagLoaded","then","gtag","send_to","getGoogleAdsConversionIdentifiers","google_business_vertical","getGoogleAdsDynamicRemarketingOrderItems","data_basic","data_with_cart","getGoogleAdsConversionIdentifiersWithLabel","transaction_id","number","new_customer","aw_merchant_id","discount","aw_feed_country","aw_feed_language","getGoogleAdsRegularOrderItems","conversionIdentifiers","orderItems","orderItem","analytics","universal","property_id","mp_active","affiliation","value_regular","tax","shipping","coupon","getGAUAOrderItems","category","join","variant","variant_name","brand","ga3AddListNameToProduct","item_data","productPosition","list_name","list_position","ga4","measurement_id","getGA4OrderItems","item_name","item_category","item_id","item_variant","item_brand","state","canGoogleLoad","loadGoogle","logPreventedPixelLoading","type","consent_mode","active","getConsentValues","mode","categories","includes","getVisitorConsentStatusAndUpdateGoogleConsentSettings","google_consent_settings","analytics_storage","ad_storage","updateGoogleConsentMode","cookie_consent_mgmt","explicit_consent","fireGtagGoogleAds","enhanced_conversions","phone_conversion_label","phone_conversion_number","keys","page_type","enhanced_conversion_data","fireGtagGoogleAnalyticsUA","parameters","fireGtagGoogleAnalyticsGA4","isGoogleActive","getGoogleGtagId","loadScriptAndCacheIt","done","script","textStatus","dataLayer","wait_for_update","region","ads_data_redaction","url_passthrough","linker","settings","Date","Promise","resolve","reject","startTime","wait","setTimeout","optimize","container_id","load_google_optimize_pixel","hotjar","site_id","load_hotjar_pixel","h","o","hj","q","_hjSettings","hjid","hjsv","a","r","appendChild","getComplianzCookies","cmplz_statistics","cmplz_marketing","visitorHasChosen","getCookieLawInfoCookies","analyticsCookie","adsCookie","wpmConsentValues","setConsentValueCategories","updateConsentCookieValues","cookie","explicitConsent","decodeURI","indexOf","JSON","parse","action","length","consents","statistics","marketing","thirdparty","advanced","setConsentDefaultValuesToExplicit","pixelName","canIFireMode","log","scriptTagObserver","MutationObserver","mutations","forEach","addedNodes","node","shouldScriptBeActive","unblockScript","blockScript","observe","head","childList","subtree","disconnect","split","some","element","scriptNode","removeAttach","remove","wpmSrc","attr","appendTo","removeAttr","unblockAllScripts","unblockSelectedPixels","Cookiebot","consent","detail","cmplzStatusChange","cmplzConsentData","huObserver","hu","documentElement","body","explicitConsentStateAlreadySet","url","URL","this","productId","getProductIdByCartItemKeyUrl","removeProductFromCart","addProductToCart","product_type","Number","val","each","find","classes","getPostIdFromString","one","target","closest","matches","match","nextAll","getIdBasedOndVariationsOutputSetting","Error","getProductDetailsFormattedForEvent","isEmail","fireCheckoutProgress","emailSelected","paymentMethodSelected","fireCheckoutOption","cart","getCartItemsFromBackend","variation","microdata_product_id","doesWooCommerceCartExist","getCartItems","productIds","getAddToCartLinkProductIds","getProductsFromBackend","referrer","referrerHostname","hostname","host","setCookie","wpmLoadFired","getMainProductIdFromProductPage","getProductDataForViewItemEvent","isOrderIdStored","writeOrderIdToStorage","hasLoginEventFired","setLoginEventFired","wpmDeduper","wpmRestSettings","checkCookie","useRestEndpoint","isSessionStorageAvailable","isRestEndpointAvailable","isBelowRestErrorThreshold","sessionStorage","getItem","testEndpoint","protocol","cookieName","ajax","timeout","statusCode","response","setItem","stringify","isWpmRestEndpointAvailable","orderId","Storage","localStorage","ids","expiresDate","setDate","getDate","toUTCString","storeOrderIdOnServer","orderDeduplication","email","test","quantityToRemove","isVariation","parentId","saveCartObjectToDataLayer","dataType","ajax_url","success","cartItems","filter","hasOwnProperty","assign","cartObject","step","checkout_option","string","triggerViewItemList","viewItemListTriggerTestMode","css","append","viewItemListTrigger","opacity","backgroundColor","getSearchTermFromUrl","URLSearchParams","search","get","io","ioTimeouts","observerCallback","observer","entry","elementId","next","isIntersecting","testMode","repeat","unobserve","clearTimeout","allIoElementsToWatch","ioid","getAllElementsToWatch","map","i","elem","parent","hasClass","prev","startIntersectionObserverToWatch","urlHasParameter","IntersectionObserver","threshold","startProductsMutationObserverToWatch","productsNode","parents","has","first","productsMutationObserver","attributes","characterData","mutation","newNodes","hasWpmProductIdElement","siblings","cookieValue","expiryDays","d","setTime","getTime","expires","ca","decodeURIComponent","c","charAt","getWpmSessionData","setWpmSessionData","order_id","nonce","cartItemKey","cartItemKeys","position","parentId_dyn_r_ids","setReferrerToCookie","getReferrerFromCookie","getClidFromBrowser","clidCookieId","clidId","gclid","dclid","getUserAgent","getViewPort","width","max","clientWidth","innerWidth","height","clientHeight","innerHeight","options","extend","cache","getOrderItemPrice","total","total_tax","loginEventFired","wpmDataLayerExists","waitForVar","jQueryExists","waitForjQuery","pageLoaded","readyState","pageReady","isMiniCartActive","parameter","pro","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__"],"sourceRoot":""}